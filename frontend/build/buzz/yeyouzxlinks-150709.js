var Anti=function(e){function t(t){var n=window.event||t;for(b=n.target||n.srcElement;b&&"A"!=b.tagName;)if(b=b.parentNode,b===e)return!1;m=(new Date).getTime(),u=9999,c=n.clientX,d=n.clientY,h=v?m-v:0,i()&&o()}function n(){y=(new Date).getTime(),u=y-m,i()&&o()}function r(e){var t=window.event||e;w+=1,f||(f=t.clientX),p||(p=t.clientY),v=(new Date).getTime()}function i(){if(l=0,g=/\?url\=([^\.]+)\./.exec(b.href)){for(var e=0;w*x%99+9>e;++e)l+=g[1].charCodeAt(u*e%g[1].length);return!0}return!1}function o(){var e="&ck="+[l,w,u,c,d,f,p,h].join(".");if(b.href){var t=b.href;-1==t.indexOf("&ck=")?b.href+=e:b.href=t.replace(/&ck=[\w.]*/,e)}}function a(t,n){for(var r,i=0;r=t[i];i++)window.attachEvent?e.attachEvent("on"+r,n[i]):window.addEventListener?e.addEventListener(r,n[i],!1):e["on"+r]=n[i],_[r]=n[i]}function s(t){for(var n,r=0;n=t[r];r++)window.detachEvent?e.detachEvent("on"+n,_[n]):window.removeEventListener?e.removeEventListener(n,_[n],!1):e["on"+n]=null,_[n]=null}var l,u,c,d,f,p,h,g,m,v,y,b,x=0,w=0;u=c=d=f=p=h=g=m=v=y=b=0;var _={};return{setTimesign:function(e){return x=e,this},bind:function(){return a(["mouseover","mousedown","mouseup"],[r,t,n]),this},unbind:function(){return s(["mouseover","mousedown","mouseup"]),this},dispose:function(){e&&(this.unbind(),e=null,_=null)}}};(function(e){e=e||window;var t,n="yeyouzxlinks",r="#main",i="http://iwan.baidu.com/baidutopAjax/getGame?gametype=yeyou&zt=baidutop",o=e[n]={};o.init=function(){if(t)return o;var e=$.cookie("iwan_query"),n=o.getQueryValue("query")||e;return t=new Anti($(r)[0]).bind(),i+=n?"&query="+n:"",o},o.getJsonP=function(e){$.ajax({url:i,dataType:"jsonp",error:function(){o.setRevert()},success:function(t){t&&0===+t.status&&t.data&&t.data.length?o.setData(t,e):o.setRevert()}})},o.setRevert=function(){t.unbind()},o.setData=function(e,n){t.setTimesign(e.timesign);var r={};$.each(e.data,function(e,t){r[t.gamename.toLowerCase()]=t.url}),n&&n(r)},o.getQueryValue=function(e,t){t=t||location.href;var n=RegExp("(^|&|\\?|#)"+e.replace(RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1")+"=([^&#]*)(&|$|#)",""),r=t.match(n);return r?r[2]:""},$(function(){var e=location.href,t=function(e,t){r(e,t);var n=$(e).closest("tr.hideline").next();n.hasClass("item-tr")&&n.find("a").each(function(){this.className&&r(this,t)})},r=function(e,t){var r="href_o_"+n;t?($(e).attr(r)||$(e).attr(r,$(e).attr("href")),$(e).attr("href",t)):$(e).attr(r)&&$(e).attr("href",$(e).attr(r))},i=function(e){$("#main a.list-title").each(function(){var n=e[$(this).text().toLowerCase()];t(this,n)})},o=function(e,t){e.length&&t&&e.attr("href",t)},a=function(e){o($("a.game-url"),e[page_param.keyword])},s=function(e){$("a.gameUrl").each(function(){o($(this),e[$(this).attr("k").toLowerCase()])}),$.on("changelink.yeyouzxlinks",function(t,n,r){o(r.find("a.gameUrl"),e[n.toLowerCase()])})};yeyouzxlinks.init().getJsonP(function(t){-1!==e.indexOf("/buzz")?i(t):-1!==e.indexOf("/detail")?a(t):s(t)})})})();