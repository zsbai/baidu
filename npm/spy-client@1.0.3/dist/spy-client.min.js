!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SpyClient=t():e.SpyClient=t()}(window,function(){return(r={},o.m=n={"/7QA":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return d});var r=n("MgzW"),o=n.n(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a="http:"===location.protocol?"http://sestat.baidu.com/mwb2.gif?":"https://sp1.baidu.com/5b1ZeDe5KgQFm2e88IuM_a/mwb2.gif?",s=/(iPhone|iPod|iPad)/.test(navigator.userAgent);function f(e){console.error("[SpyClient_log]".concat(e))}var c,l,u,d=(c=p,(l=[{key:"send",value:function(e){if(this.check(e)){if("number"==typeof e.sample){if(Math.random()>e.sample)return}else if("number"==typeof this.option.sample&&Math.random()>this.option.sample)return;delete e.sample,e=o()({pid:this.option.pid,lid:this.option.lid,ts:Date.now(),group:"common"},e);var t=a+function(n){return Object.keys(n).map(function(e){var t=n[e];return void 0===t?t="":"string"!=typeof t&&(t=JSON.stringify(t)),encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&")}(e);!s&&navigator.sendBeacon&&navigator.sendBeacon(t)||((new Image).src=t)}}},{key:"check",value:function(e){if(!this.option.check)return!0;var t=["perf","except","dist","count"];if(-1===t.indexOf(e.type))return f("type only is one of "+t.join(", ")),!1;if(e.group&&30<e.group.length)return f("group length execeeds 30"),!1;var n=/^[a-zA-Z0-9-_]{0,30}$/;if("except"===e.type){if("string"!=typeof e.info.msg||!e.info.msg.length)return f("info msg field must be not empty and is String"),!1}else for(var r=0,o=Object.keys(e.info);r<o.length;r++){var i=o[r];if(!n.test(i))return f("info key [".concat(i,"] is unexpected. ")+"Length must be not more than 30. Supported chars: a-zA-Z0-9-_"),!1;var a=e.info[i];if("dist"===e.type){if(30<a.length)return f("info.".concat(i," value length execeeds 30 when type == 'dist'")),!1}else if("number"!=typeof a)return f("info.".concat(i," value must be number")),!1}if(e.dim)for(var s=0,c=Object.keys(e.dim);s<c.length;s++){var l=c[s];if(!n.test(l))return f("dim key [".concat(l,"] is unexpected. ")+"Length must be not more than 30. Supported chars: a-zA-Z0-9-_"),!1;var u=e.dim[l];if(!/^[a-zA-Z0-9\-_\*\.\s\/#\+@\&\u4e00-\u9fa5]{0,30}$/.test(u))return f("dim.".concat(l," value [").concat(u,"] is unexpected. ")+"Length must be not more than 30. Supported chars: a-zA-Z0-9-_*. /#+@& and Chinese"),!1}return!0}},{key:"sendPerf",value:function(e){this.send(o()({type:"perf"},e))}},{key:"sendExcept",value:function(e){this.send(o()({type:"except"},e))}},{key:"sendDist",value:function(e){this.send(o()({type:"dist"},e))}},{key:"sendCount",value:function(e){this.send(o()({type:"count"},e))}},{key:"sendExceptForError",value:function(e,t){var n=o()({},t);n.info=o()({},t.info||{},{msg:e.message,stack:e.stack}),this.sendExcept(n)}},{key:"getPerformanceTimingInfo",value:function(m){if(window.performance&&window.performance.timing){var h=window.performance.timing,e=function p(){setTimeout(function(){if(h.loadEventEnd&&0<h.loadEventEnd){var e=h.navigationStart,t=h.requestStart,n=h.responseStart,r=h.responseEnd,o=h.domContentLoadedEventStart,i=h.domComplete,a=h.domLoading,s=h.domainLookupStart,c=h.domainLookupEnd,l=h.connectStart,u=h.connectEnd,f=h.loadEventStart,d=h.loadEventEnd;m({dns:c-s,tcp:u-l,req:n-t,res:r-n,dct:i-a,load:d-f,domready:o-e,finish:d-e})}else p()},200),window.removeEventListener("load",p)};h.loadEventEnd&&0<h.loadEventEnd?e():window.addEventListener("load",e)}else m()}},{key:"listenGlobalError",value:function(e){e&&(this.listenErrorOption=e),window.removeEventListener("error",this.globalErrorCallback),window.addEventListener("error",this.globalErrorCallback)}},{key:"unListenGlobalError",value:function(){window.removeEventListener("error",this.globalErrorCallback),this.listenErrorOption={}}},{key:"startMark",value:function(e){this.markCache[e]={start:Date.now()}}},{key:"endMark",value:function(e){return this.markCache[e]?(this.markCache[e].total=Date.now()-this.markCache[e].start,this.markCache[e].total):null}},{key:"clearMark",value:function(e){this.markCache[e]&&delete this.markCache[e]}},{key:"getAllMark",value:function(){for(var e={},t=0,n=Object.keys(this.markCache);t<n.length;t++){var r=n[t];e[r]=this.markCache[r].total}return e}},{key:"clearAllMark",value:function(){this.markCache={}}},{key:"globalErrorCallback",value:function(e){var t=e.error||{},n=o()({},this.listenErrorOption);n.info=o()({},this.listenErrorOption.info||{},{msg:e.message,colno:e.colno||e.column||window.event&&window.event.errorCharacter,lineno:e.lineno||e.line,filename:e.filename||e.sourceURL,stack:t.stack}),this.sendExcept(n)}}])&&i(c.prototype,l),void(u&&i(c,u)),p);function p(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),this.sample={},this.markCache={},this.listenErrorOption={},this.globalErrorCallback=this.globalErrorCallback.bind(this),!e.pid)throw new Error("pid is required");this.option={pid:e.pid,lid:e.lid,check:!1!==e.check,sample:e.sample}}},MgzW:function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),i=1;i<arguments.length;i++){for(var a in n=Object(arguments[i]))l.call(n,a)&&(o[a]=n[a]);if(c){r=c(n);for(var s=0;s<r.length;s++)u.call(n,r[s])&&(o[r[s]]=n[r[s]])}}return o}}},o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s="/7QA")).default;function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,r});