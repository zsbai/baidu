define("common:widget/lib/juicer/juicer",function(e,t,n){var i=function(){var e=[].slice.call(arguments);return e.push(i.options),e[0].match(/^\s*#([\w:\-\.]+)\s*$/gim)&&e[0].replace(/^\s*#([\w:\-\.]+)\s*$/gim,function(t,n){var i=document,r=i&&i.getElementById(n);e[0]=r?r.value||r.innerHTML:t}),1==arguments.length?i.compile.apply(i,e):arguments.length>=2?i.to_html.apply(i,e):void 0},r={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(e){return r.escapehash[e]},escaping:function(e){return"string"!=typeof e?e:e.replace(/[&<>"]/gim,this.escapereplace)},detection:function(e){return"undefined"==typeof e?"":e}},o=function(e){if("undefined"!=typeof console){if(console.warn)return void console.warn(e);if(console.log)return void console.log(e)}throw e},s=function(e,t){if(e=e!==Object(e)?{}:e,e.__proto__)return e.__proto__=t,e;var n=function(){},i=Object.create?Object.create(t):new(n.prototype=t,n);for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i};i.__cache={},i.version="0.6.5-stable",i.settings={},i.tags={operationOpen:"{@",operationClose:"}",interpolateOpen:"\\${",interpolateClose:"}",noneencodeOpen:"\\$\\${",noneencodeClose:"}",commentOpen:"\\{#",commentClose:"\\}"},i.options={cache:!0,strip:!0,errorhandling:!0,detection:!0,_method:s({__escapehtml:r,__throw:o,__juicer:i},{})},i.tagInit=function(){var e=i.tags.operationOpen+"each\\s*([^}]*?)\\s*as\\s*(\\w*?)\\s*(,\\s*\\w*?)?"+i.tags.operationClose,t=i.tags.operationOpen+"\\/each"+i.tags.operationClose,n=i.tags.operationOpen+"if\\s*([^}]*?)"+i.tags.operationClose,r=i.tags.operationOpen+"\\/if"+i.tags.operationClose,o=i.tags.operationOpen+"else"+i.tags.operationClose,s=i.tags.operationOpen+"else if\\s*([^}]*?)"+i.tags.operationClose,a=i.tags.interpolateOpen+"([\\s\\S]+?)"+i.tags.interpolateClose,c=i.tags.noneencodeOpen+"([\\s\\S]+?)"+i.tags.noneencodeClose,p=i.tags.commentOpen+"[^}]*?"+i.tags.commentClose,l=i.tags.operationOpen+"each\\s*(\\w*?)\\s*in\\s*range\\(([^}]+?)\\s*,\\s*([^}]+?)\\)"+i.tags.operationClose,u=i.tags.operationOpen+"include\\s*([^}]*?)\\s*,\\s*([^}]*?)"+i.tags.operationClose;i.settings.forstart=new RegExp(e,"igm"),i.settings.forend=new RegExp(t,"igm"),i.settings.ifstart=new RegExp(n,"igm"),i.settings.ifend=new RegExp(r,"igm"),i.settings.elsestart=new RegExp(o,"igm"),i.settings.elseifstart=new RegExp(s,"igm"),i.settings.interpolate=new RegExp(a,"igm"),i.settings.noneencode=new RegExp(c,"igm"),i.settings.inlinecomment=new RegExp(p,"igm"),i.settings.rangestart=new RegExp(l,"igm"),i.settings.include=new RegExp(u,"igm")},i.tagInit(),i.set=function(e,t){var n=this,i=function(e){return e.replace(/[\$\(\)\[\]\+\^\{\}\?\*\|\.]/gim,function(e){return"\\"+e})},r=function(e,t){var r=e.match(/^tag::(.*)$/i);return r?(n.tags[r[1]]=i(t),void n.tagInit()):void(n.options[e]=t)};if(2===arguments.length)return void r(e,t);if(e===Object(e))for(var o in e)e.hasOwnProperty(o)&&r(o,e[o])},i.register=function(e,t){var n=this.options._method;return n.hasOwnProperty(e)?!1:n[e]=t},i.unregister=function(e){var t=this.options._method;return t.hasOwnProperty(e)?delete t[e]:void 0},i.template=function(e){var t=this;this.options=e,this.__interpolate=function(e,t,n){var i,r=e.split("|"),o=r[0]||"";return r.length>1&&(e=r.shift(),i=r.shift().split(","),o="_method."+i.shift()+".call({}, "+[e].concat(i)+")"),"<%= "+(t?"_method.__escapehtml.escaping":"")+"("+(n&&n.detection===!1?"":"_method.__escapehtml.detection")+"("+o+")) %>"},this.__removeShell=function(e,n){var r=0;return e=e.replace(i.settings.forstart,function(e,t,n,i){var n=n||"value",i=i&&i.substr(1),o="i"+r++;return"<% ~function() {for(var "+o+" in "+t+") {if("+t+".hasOwnProperty("+o+")) {var "+n+"="+t+"["+o+"];"+(i?"var "+i+"="+o+";":"")+" %>"}).replace(i.settings.forend,"<% }}}(); %>").replace(i.settings.ifstart,function(e,t){return"<% if("+t+") { %>"}).replace(i.settings.ifend,"<% } %>").replace(i.settings.elsestart,function(){return"<% } else { %>"}).replace(i.settings.elseifstart,function(e,t){return"<% } else if("+t+") { %>"}).replace(i.settings.noneencode,function(e,i){return t.__interpolate(i,!1,n)}).replace(i.settings.interpolate,function(e,i){return t.__interpolate(i,!0,n)}).replace(i.settings.inlinecomment,"").replace(i.settings.rangestart,function(e,t,n,i){var o="j"+r++;return"<% ~function() {for(var "+o+"="+n+";"+o+"<"+i+";"+o+"++) {{var "+t+"="+o+"; %>"}).replace(i.settings.include,function(e,t,n){return"<%= _method.__juicer("+t+", "+n+"); %>"}),n&&n.errorhandling===!1||(e="<% try { %>"+e,e+='<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>'),e},this.__toNative=function(e,t){return this.__convert(e,!t||t.strip)},this.__lexicalAnalyze=function(e){var t=[],n=[],r="",o=["if","each","_","_method","console","break","case","catch","continue","debugger","default","delete","do","finally","for","function","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with","null","typeof","class","enum","export","extends","import","super","implements","interface","let","package","private","protected","public","static","yield","const","arguments","true","false","undefined","NaN"],s=function(e,t){if(Array.prototype.indexOf&&e.indexOf===Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},a=function(e,r){if(r=r.match(/\w+/gim)[0],-1===s(t,r)&&-1===s(o,r)&&-1===s(n,r)){if("undefined"!=typeof window&&"function"==typeof window[r]&&window[r].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return e;if("undefined"!=typeof global&&"function"==typeof global[r]&&global[r].toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return e;if("function"==typeof i.options._method[r]||i.options._method.hasOwnProperty(r))return n.push(r),e;t.push(r)}return e};e.replace(i.settings.forstart,a).replace(i.settings.interpolate,a).replace(i.settings.ifstart,a).replace(i.settings.elseifstart,a).replace(i.settings.include,a).replace(/[\+\-\*\/%!\?\|\^&~<>=,\(\)\[\]]\s*([A-Za-z_]+)/gim,a);for(var c=0;c<t.length;c++)r+="var "+t[c]+"=_."+t[c]+";";for(var c=0;c<n.length;c++)r+="var "+n[c]+"=_method."+n[c]+";";return"<% "+r+" %>"},this.__convert=function(e,t){var n=[].join("");return n+="'use strict';",n+="var _=_||{};",n+="var _out='';_out+='",n+=t!==!1?e.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;":e.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');"},this.parse=function(e,n){var i=this;return n&&n.loose===!1||(e=this.__lexicalAnalyze(e)+e),e=this.__removeShell(e,n),e=this.__toNative(e,n),this._render=new Function("_, _method",e),this.render=function(e,n){return n&&n===t.options._method||(n=s(n,t.options._method)),i._render.call(this,e,n)},this}},i.compile=function(e,t){t&&t===this.options||(t=s(t,this.options));try{var n=this.__cache[e]?this.__cache[e]:new this.template(this.options).parse(e,t);return t&&t.cache===!1||(this.__cache[e]=n),n}catch(i){return o("Juicer Compile Exception: "+i.message),{render:function(){}}}},i.to_html=function(e,t,n){return n&&n===this.options||(n=s(n,this.options)),this.compile(e,n).render(t,n._method)},"undefined"!=typeof n&&n.exports?n.exports=i:this.juicer=i});