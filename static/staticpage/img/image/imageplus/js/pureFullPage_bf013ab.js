"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var PureFullPage=function(){function t(e){_classCallCheck(this,t);var i={isShowNav:!0,delay:1e3,definePages:function(){}};utils.polyfill(),this.options=Object.assign(i,e),this.options.definePages=this.options.definePages.bind(this),this.container=document.querySelector("#pureFullPage"),this.pages=document.querySelectorAll(".page"),this.pagesNum=this.pages.length,this.navDots=[],this.viewHeight=document.documentElement.clientHeight,this.currentPosition=0,this.DELAY=this.options.delay,this.startY=void 0,this.init()}return _createClass(t,[{key:"callBack",value:function(){this.options.definePages(Math.abs(this.currentPosition)/this.viewHeight+1)}},{key:"getNewPosition",value:function(){this.viewHeight=document.documentElement.clientHeight,this.container.style.height="".concat(this.viewHeight,"px");var t;this.navDots.forEach(function(e,i){e.classList.contains("active")&&(t=i)}),this.currentPosition=-(t*this.viewHeight),this.turnPage(this.currentPosition)}},{key:"handleWindowResize",value:function(t){utils.debounce(this.getNewPosition,this,t,this.DELAY)}},{key:"turnPage",value:function(t){this.container.style.top="".concat(t,"px")}},{key:"changeNavStyle",value:function(t){if(this.options.isShowNav){this.navDots.forEach(function(t){utils.deleteClassName(t,"active")});var e=-(t/this.viewHeight);this.navDots[e].classList.add("active")}}},{key:"createNav",value:function(){var t=this,e=document.createElement("div");e.className="nav opacity_animate_init",this.container.appendChild(e);for(var i=0;i<this.pagesNum;i++)e.innerHTML+='<p class="nav-dot"><span></span></p>';var s=document.querySelectorAll(".nav-dot");this.navDots=Array.prototype.slice.call(s),this.navDots[0].classList.add("active"),this.navDots.forEach(function(e,i){e.addEventListener("click",function(){t.currentPosition=-(i*t.viewHeight),t.callBack(),t.turnPage(t.currentPosition),t.navDots.forEach(function(t){utils.deleteClassName(t,"active")}),e.classList.add("active")})})}},{key:"goUp",value:function(){-this.container.offsetTop>=this.viewHeight&&(this.currentPosition=this.currentPosition+this.viewHeight,this.turnPage(this.currentPosition),this.changeNavStyle(this.currentPosition),this.callBack())}},{key:"goDown",value:function(){-this.container.offsetTop<=this.viewHeight*(this.pagesNum-2)&&(this.currentPosition=this.currentPosition-this.viewHeight,this.turnPage(this.currentPosition),this.changeNavStyle(this.currentPosition),this.callBack())}},{key:"scrollMouse",value:function(t){var e=utils.getWheelDelta(t);0>e?this.goDown():this.goUp()}},{key:"touchEnd",value:function(t){var e=t.changedTouches[0].pageY,i=e-this.startY;Math.abs(i)<80||(0>i?this.goDown():this.goUp())}},{key:"init",value:function(){var t=this;this.container.style.height="".concat(this.viewHeight,"px"),this.turnPage(0),window.scrollTo(0,0),this.options.isShowNav&&this.createNav();var e=utils.throttle(this.scrollMouse,this,this.DELAY);-1===navigator.userAgent.toLowerCase().indexOf("firefox")?document.addEventListener("mousewheel",e):document.addEventListener("DOMMouseScroll",e),document.addEventListener("touchstart",function(e){t.startY=e.touches[0].pageY});var i=utils.throttle(this.touchEnd,this,500);document.addEventListener("touchend",i),window.addEventListener("resize",this.handleWindowResize.bind(this))}}]),t}();