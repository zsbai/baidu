define("wiki-home:widget/userCards/userCards",function(a,e,t){function r(a,e,t,r,s){i.ajax({type:"GET",url:"/api/wikihome/userlemma",data:{uks:a.join("|"),mt:s},dataType:"JSON",success:function(i){if(0==i.errno)for(var s in a){var n=a[s],m=e[s],u=t[s],d=u.find("img").attr("src"),c=u.parents(".card"),l=c.find(".back_usi_lem"),o=c.find(".back_usi_tit"),f=c.find(".front_usi_lem"),h=c.find(".front_usi_avt img"),p=c.find(".back_usi_tit_link"),v="experts"===c.data("utype"),b=i.data[n],k=v?"认证":"编辑";if(b.auditorLemmaNum>0)var _=b.auditorLemmaList,g=m+'<br/><span class="grey">'+k+"的词条</span>";else if(b.excellentLemmaNum>=3)var _=b.excellentLemmaList,g=m+'<br/><span class="grey">'+k+"的特色词条</span>";else var _=b.editLemmaList,g=m+'<br/><span class="grey">'+k+"的词条</span>";var L="";for(var s in _)L+='<a class="cmn-btn-hover-blue cmn-btn-28" href="'+_[s].url+'" herf="'+_[s].url+'" target="_blank">'+_[s].lemmaTitle+"</a>";o.html('<img src="'+d+'" /><div class="content">'+g+"</div>"),l.html(L),v?p.attr("href","javascript:;"):p.attr("href","https://baike.baidu.com/usercenter/userpage?uname="+m+"&from=home"),r&&(f.html(v?"权威词条 "+(b.editLemmaNum+b.auditorLemmaNum):"词条 "+b.editLemmaNum+" | 特色词条 "+b.excellentLemmaNum),h.attr("src",d))}}}),1==a.length&&(t[0].parents(".back_uss_avt").find(".avator").removeClass("selected"),t[0].addClass("selected"))}var i=a("wiki-common:widget/lib/jquery/jquery"),s=a("wiki-home:widget/userCards/flipCard");t.exports=function(a){i(".card .back").on("click",".avator",function(){var a=i(this).attr("data-uid"),e=i(this).attr("data-uname");a&&r([a],[e],[i(this)])}),i(document).ready(function(){var e=[],t=[],n=[];i("#userCards .card").each(function(){var a=(new s(i(this)),i(this).find(".back .avator").eq(0)),r=a.attr("data-uid"),m=a.attr("data-uname");r&&(e.push(r),t.push(m),n.push(a))}),r(e,t,n,!0,a)})}});