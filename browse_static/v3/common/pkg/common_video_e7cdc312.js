define("common:widget/video/advList/advList.js",function(require,exports,module){function MisOutputAd(){}require("common:static/ui/tmpl/tmpl.js");var $=require("common:static/vendor/jquery/jquery.js"),_=require("common:static/vendor/underscore/underscore.js"),admis=require("common:static/ui/admis/admis.js"),advPositions={};MisOutputAd.prototype.init=function(){this.getData(this.render)},MisOutputAd.prototype.collection={indexRightTop:{id:"index_right_top",html:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="",__p+="\n";var item=data&&data[0]||[];data&&data.length>1&&(item=data[Math.floor(Math.random()*data.length)]),__p+="\n",item&&1==item.hot_day&&(__p+='\n<a href="'+(null==(__t=item.url)?"":__t)+'" target="_blank" static="stp=toplist_140_70" title="'+(null==(__t=item.title)?"":_.escape(__t))+'">\n    <img src="'+(null==(__t=item.imgh_url)?"":__t)+'" alt="'+(null==(__t=item.title)?"":_.escape(__t))+'">\n</a>\n'),__p+="\n"}return __p},filter:function(){return/frp=bdbrand/.test(location.href)?!1:!0},action:function(){}},indexRightFloat:{id:"index_right_float",html:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="",__p+='\n<div class="index_AD_right_close">\n	<a title="右侧悬浮广告" class="close" href="javascript:void(0)"></a>\n</div>\n<div class="adContainer">\n\n';for(var data=data&&data.slice(0,3)||[],i=0,len=data.length;len>i;i++){var item=data[i];__p+='\n\n<div id="adRightFloat'+(null==(__t=i)?"":__t)+'" \n    class="index_AD_right_fixed \n    ',item.title&&3>len&&(__p+=" has-title "),__p+=" AD-close-status\n	",1==item.intro&&(__p+=" index_AD_right_fixed_big"),__p+=' ">\n	<a class="normal" target="_blank" href="'+(null==(__t=item.url)?"":__t)+'" static="bl=index_AD_right_fixed&stp=adv_right_90">\n		<img  src="'+(null==(__t=item.imgh_url||item.imgv_url)?"":__t)+'" />',1!=item.intro&&3>len&&(__p+=""+(null==(__t=item.title)?"":__t)),__p+='\n		\n	</a>\n	<a title="'+(null==(__t=item.title)?"":__t)+'" class="close" href="javascript:void(0)"></a>\n</div>\n'}__p+="\n</div>\n"}return __p},filter:function(){return/frp=bdbrand/.test(location.href)?!1:!0},action:function(){var t=$(".index_AD_right_fixed"),n={bdv_adRightFloat0:"#adRightFloat0",bdv_adRightFloat1:"#adRightFloat1",bdv_adRightFloat2:"#adRightFloat2",bdv_adRightFloat3:"#adRightFloat3",bdv_right_ad_poster:"#adRightFloatBig"};if(_.each(n,function(t,n){$.cookie.get(n)||$(t).removeClass("AD-close-status")}),t&&t.length&&$(".index_AD_right_fixed.AD-close-status").length&&$(".index_AD_right_close").show(),!$("#adRightFloatBig").hasClass("AD-close-status")){var i=5;$("#adRightFloatBig").append($("<span class='time-num'><b>5</b>秒后自动关闭</span>"));var e=$(".time-num b"),a=setInterval(function(){0>=i?($("#adRightFloatBig").addClass("AD-close-status"),e.parent().remove(),$.cookie.set("bdv_right_ad_poster","1",{expires:864e4,path:"/"}),clearInterval(a)):e.html(i--)},1e3)}$(".index_AD_right_fixed .close").on("click",function(){var t=$(this).parent(),n=t.attr("id");$(".index_AD_right_close").show(),t.hasClass("AD-close-status")?(t.removeClass("AD-close-status"),$(".index-right-float-big").removeClass("AD-close-status")):(t.addClass("AD-close-status"),$(".index-right-float-big").addClass("AD-close-status")),$.cookie.set("bdv_"+n,"1",{expires:864e4,path:"/"})}),$(".index_AD_right_close").on("click",function(){_.each(n,function(t,n){$.cookie.remove(n)}),$(this).hide().parent().find(".index_AD_right_fixed").removeClass("AD-close-status")}),$(".adContainer").on("mouseover",function(){$("#adRightFloatBig").removeClass("AD-close-status")}),$(".adContainer").on("mouseleave",function(){$("#adRightFloatBig").addClass("AD-close-status")})}},indexBannerTop:{id:"index_banner_top",html:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="",__p+="\n";var item=data&&data[0]||[];data&&data.length>1&&(item=data[Math.floor(Math.random()*data.length)]),__p+="\n",item&&1==item.hot_day&&(__p+='\n    <div class="ad-top-banner" > \n        <a href="'+(null==(__t=item.url)?"":__t)+'" target="_blank" id="linkAdv984" static="stp=adv_top_984_90">\n            <img src="'+(null==(__t=item.imgh_url)?"":__t)+'" alt="'+(null==(__t=item.title)?"":__t)+'"/>\n        </a>\n        <a href="javascript:void(0)" class="btnTopBannerClose"></a>\n    </div>\n'),__p+="\n"}return __p},filter:function(){return/frp=bdbrand/.test(location.href)?!1:$.cookie.get("bdv_top_ad_banner")?!1:!0},action:function(t){$(".ad-top-banner")&&$(".ad-top-banner").length>0&&$("#"+t).show(),$("#"+t).on("click",".btnTopBannerClose",function(){var t=new Date,n=3600*(23-t.getHours()),i=60*(59-t.getMinutes());$(this).parent(".ad-top-banner").hide(),$.cookie.set("bdv_top_ad_banner","1",{expires:1e3*(n+i),path:"/"})})}},event2014Warmup:{id:"event_2014_warmup",html:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="",__p+="\n";var item=data&&data[0]||[];data&&data.length>1&&(item=data[Math.floor(Math.random()*data.length)]),__p+="\n",item&&1==item.hot_day&&(__p+='\n    <div class="ad-top-banner" style=\'position:relative;margin-bottom:20px;\' > \n        <a href="'+(null==(__t=item.url)?"":__t)+'" target="_blank" id="linkAdv984" static="stp=adv1234">\n            <img src="'+(null==(__t=item.imgh_url)?"":__t)+'" alt="'+(null==(__t=item.title)?"":__t)+'"/>\n        </a>\n        <a href="javascript:void(0)" \n		   class="btnTopBannerClose" \n		   style=\'position: absolute;\n	              top: 8px; right: 8px; width: 14px; height: 13px; \n				  background: url(http://vs3.bdstatic.com/pc_static/promotion/icon_close.gif) 0 0 no-repeat;\'></a>\n    </div>\n'),__p+="\n"}return __p},filter:function(){return/frp=bdbrand/.test(location.href)?!1:$.cookie.get("bdv_search_top_banner")?!1:!0},action:function(t){$("#"+t).on("click",".btnTopBannerClose",function(){var t=new Date,n=3600*(23-t.getHours()),i=60*(59-t.getMinutes());$(this).parent(".ad-top-banner").hide(),$.cookie.set("bdv_search_top_banner","1",{expires:1e3*(n+i),path:"/"})})}},indexBannerBottom:{id:"index_banner_bottom",html:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="",__p+="\n";var item=data&&data[0]||[];data&&data.length>1&&(item=data[Math.floor(Math.random()*data.length)]),__p+="\n",item&&1==item.hot_day&&(__p+='\n	<div> \n	<a href="'+(null==(__t=item.url)?"":__t)+'" target="_blank" static="stp=iph_promote_984_83">\n		<img src="'+(null==(__t=item.imgh_url)?"":__t)+'" alt="'+(null==(__t=item.title)?"":__t)+'" />\n	</a>\n	</div>\n'),__p+="\n"}return __p},filter:function(){return/frp=bdbrand/.test(location.href)?!1:!0},action:function(){}}},MisOutputAd.prototype.collection.subIndexBannerTop=$.extend({},MisOutputAd.prototype.collection.indexBannerTop,{id:"sub_index_banner_top"}),MisOutputAd.prototype.getData=function(t){var n=this.bdvAdCache={},i=this;admis.get(["右侧悬浮","右侧肩膀图","顶部通栏","小频道顶部通栏","检索端顶部通栏","底部通栏"],function(e){n.indexRightTop=e["右侧肩膀图"],n.indexRightFloat=e["右侧悬浮"],n.indexBannerTop=e["顶部通栏"],n.subIndexBannerTop=e["小频道顶部通栏"],n.event2014Warmup=e["检索端顶部通栏"],n.indexBannerBottom=e["底部通栏"],"function"==typeof t&&t(i,n)})},MisOutputAd.prototype.render=function(t,n){_.each(n,function(n,i){var e=t.collection[i].filter&&t.collection[i].filter();if(e&&t.collection[i].id in advPositions){var a=t.collection[i].html({data:n});$("#"+t.collection[i].id).html(a),t.collection[i].action(t.collection[i].id)}})};var misAD=new MisOutputAd;exports.init=function(){$(document).ready(function(){misAD.init()})},exports.push=function(t){var n=t();advPositions[n.id]=n}});
;define("common:widget/video/bdv_trace/bdv_trace.js",function(e,t,i){function n(){r.show(function(){setTimeout(function(){a(v+"&stp=new_login"),location.reload()},200)})}var s=$,a=(s.cookie,s.log),o=s.stringFormat,r=e("common:static/ui/bdPassPop/bdPassPop.js"),c=e("common:static/ui/bdvTrace/core/core.js"),d=e("common:static/ui/bdvTrace/config/config.js"),l=e("common:static/ui/bdvTrace/ugcRpTrack/ugcRpTrack.js"),g=e("common:static/ui/eventcenter/eventcenter.js"),h=e("common:static/ui/loginCheck/loginCheck.js"),p=e("common:static/vendor/underscore/underscore.js").template,u=c.delay,b="http://pc.videoclick.baidu.com/u.gif?pid=104",v="http://pc.videoclick.baidu.com/v.gif?pid=104",f=function(e,t){if(!e)throw new Error("Creating BdvTrace with empty model.");this.model=e,t=t||{},this.enableCarousel="undefined"!=typeof t.enableCarousel?t.enableCarousel:!0,this.isUgcRpTrack="undefined"!=typeof t.isUgcRpTrack?t.isUgcRpTrack:!1,this.isLogin=this.model.isLogin,this.frp=t.frp,this._hasCreatedCarousel=!1,this._isVisible=!1,this._isEmpty=!1,this._isUserTrigger=!1,this._initialize()};f.prototype={_initialize:function(){this._bindEl(),this._isVisible="none"!==this.$main.style.display,this._bindEvent(),this.isLogin&&(this.$content.innerHTML="")},_bindEl:function(){this.$el=$("#bdvTrace")[0],this.isUgcRpTrack&&this.$el.setAttribute("static",this.$el.getAttribute("static")+"&track=1"),this.$login=$(".bdv-trace-login",this.$el)[0],this.$toggle=$(".bdv-trace-toggle",this.$el)[0],this.$notify=$(".bdv-trace-notify",this.$el)[0],this.$main=$(".bdv-trace-main",this.$el)[0],this.$content=$(".bdv-trace-content",this.$el)[0],this.$bdvRecord=$("#bdvRecord"),this.$bdvRecord&&(this.$bdvRecordToggle=$(".bdv-record-toggle",this.$bdvRecord)[0],this.$bdvRecordMain=$(".bdv-record-main",this.$bdvRecord)[0])},_bindEvent:function(){var e=this,t=e.isUgcRpTrack?function(){return e._isEmpty}:function(){return!e.isLogin||e._isEmpty};s(e.$toggle).on("click",function(i){i.preventDefault(),t()?e[e._isVisible?"hide":"show"]():e._isLoading||(e._isVisible?e.hide():(e._isUserTrigger=!0,e.model.list()))}),e.$bdvRecordToggle&&s(e.$bdvRecordToggle).on("click",function(t){t.preventDefault(),e.hide()}),e.$login&&s(e.$login).on("click",function(t){t.preventDefault(),n(),e.hide()}),e._bindInnerEvent(),e._bindOuterEvent()},_bindInnerEvent:function(){var e=this;e.model.on("render",function(t){s.extend(e,t.pageMeta),(e._isUserTrigger||e._isVisible)&&e._render(t.pageData)}),e.model.on("notify",function(){e.show()})},_bindOuterEvent:function(){var e=this;g.attach("bdvTrace.list",function(t){e.isLogin?(e._isUserTrigger=!0,e.model.list(t.params)):e.show()}),g.attach("bdvTrace.add",function(t){e.isLogin?(e._isUserTrigger=!0,e.model.add(t.params,t.callback)):n()}),g.attach("bdvTrace.del",function(t){!e.isLogin&&e._isEmpty?n():(e._isUserTrigger=!0,e.model.del(t.params,t.callback))})},show:function(e){if(!this._isVisible||e===!0){this.$toggle.setAttribute("static","stp=toggle&toggle=0"),$(this.$el).addClass("bdv-trace-show");var t=this.enableCarousel&&!this._isEmpty;this.isLogin||(t=t&&this.isUgcRpTrack),t||(this.$main.style.display="block"),this._isVisible=!0,this.isLogin||u(function(){a(b)},0)}},hide:function(){this._isVisible&&(this.$toggle.setAttribute("static","stp=toggle&toggle=1"),g.trigger("bdvTraceCarousel.hide"),$(this.$el).removeClass("bdv-trace-show"),this.$main.style.display="none",this._isVisible=!1)},_hideRecord:function(){this.$bdvRecordMain&&"none"!==this.$bdvRecordMain.style.display&&(this.$bdvRecordMain.style.display="none")},_render:function(e){var t=this,i=[];if(1!=t.pageNo||e&&0!==e.length){if(e&&e.length)if(i.push("data=1"),t.enableCarousel)t._hasCreatedCarousel||(g.trigger("bdvTraceCarousel.create",{once:!0,isUgcRpTrack:t.isUgcRpTrack,model:t.model}),t._hasCreatedCarousel=!0),g.trigger("bdvTraceCarousel.page",{frp:t.frp,pageData:e,pageMeta:{pageNo:t.pageNo,pages:t.pages,size:t.size},recGroups:t.model.recGroups}),t.show(),i.push("fr=carousel");else{t.$bd?t.$bd.innerHTML="":t._initPage();var n={frp:t.frp,pageData:e,func:{getPlayUrl:d.getPlayUrl}},o="";try{o=p(s("#bdvTraceItemTpl").html(),n),t.$bd.innerHTML=o,t._rendered()}catch(r){}}}else t._isEmpty=!0,i.push("data=0"),t._renderNone();u(function(){a(b+"&"+i.join("&"))},0)},_initPage:function(){$(this.$content).removeClass("bdv-trace-none"),this.$content.innerHTML=$("#bdvTraceBdTpl")[0].innerHTML,this.$bd=$(".bdv-trace-bd",this.$content)[0],this.$ft=$(".bdv-trace-ft",this.$content)[0],this.$pager=$(".bdv-trace-pager",this.$content),this.$pagerNo=$(".bdv-trace-pager-no",this.$content)[0];var e=this;e.$pager&&s.each(e.$pager,function(t,i){s(i).on("click",function(t){t.preventDefault();var n=e.pageNo;"prev"==i.getAttribute("data-page")?n-=1:n+=1,n>0&&n<=e.pages&&(e._isUserTrigger=!0,e.model.list({pn:n}))})});var t=function(t){var i=t.parentNode.parentNode,n=t.getAttribute("data-ep"),s=t.getAttribute("data-new"),a=i.getAttribute("data-id"),o=i.getAttribute("data-type");1==s&&e.model.fire("clearNotify"),e.hide(),n&&a&&o&&u(function(){e.model.update({type:o,works_id:a,last_view:n})},0)},i=function(t){var i=t.getAttribute("data-id"),n=t.getAttribute("data-type");i&&n&&u(function(){e.model.del({type:n,works_id:i})},0)};s(this.$bd).on("click",function(e){var n=e.target;"A"===n.tagName?n.getAttribute("data-ep")?t(n):$(n).hasClass("bdv-trace-item-del")&&(e.preventDefault(),i(n)):"SPAN"===n.tagName&&(n=n.parentNode,"A"===n.tagName&&""!=n.getAttribute("data-ep")&&t(n))})},_rendered:function(){this.pages>1?(this.$pagerNo.innerHTML=this.pageNo+"/"+this.pages,this.$ft.style.display="block"):this.$ft.style.display="none",this.show()},_renderNone:function(){$(this.$content).addClass("bdv-trace-none"),this.$content.innerHTML=$("#bdvTraceNoneTpl")[0].innerHTML,this.$bd=null,this.show(!0)}},i.exports=function(e,t){var i=null,n=o("&tn=#{0}&tpl=#{0}&bl=bdvTrace",[e]);b+=n,v+=n;var s={tip:!0,autoCheck:!1,crossDomain:!0};rules=d.rules;for(var a,r=0;a=rules[r];r+=1)if(a.test()){s=a.config;break}var g=function(){h(function(e){var n="object"==typeof e&&e.value,a=n&&e.vipinfo&&e.vipinfo.isvalid,r=1==t,d={crossDomain:s.crossDomain,isLogin:n,pageSize:r?6:2},g=c,h=!n&&l.isHit(5);h&&(g=l.Klass,d.crossDomain=!0),b+=o("&login=#{0}&track=#{1}",[n?1:0,h?1:0]);var p=new g(d);i=i||new f(p,{enableCarousel:r,frp:a?"":"bdbrand",isUgcRpTrack:h}),s.autoCheck&&p.check()})};u(g,400)}});
;define("common:widget/video/cutdown/cutdown.js",function(t,n,e){function i(t){this.endClock=t.endClock||new Date(Date.parse("2015/5/13 00:00:00")),this.nowClock=t.nowClock||(new Date).getTime(),this.timeGap=Math.round((this.endClock-this.nowClock)/1e3),this.onChangeTime=t.onChangeTime,this.finish=t.finish||null,this.start()}t("common:static/vendor/jquery/jquery.js");i.prototype={constructor:i,parseDate:function(t){var n=t.split(/[- :\/]/);return new Date(n[0],n[1]-1,n[2],n[3],n[4],n[5])},countOnce:function(){var t=this,n=t.formatTime(t.timeGap);t.changeTime(n),t.lastCount=n},start:function(){var t=this;t.timeout=setTimeout(function(){t.start()},1e3),t.timeGap>0?(t.timeGap--,t.countOnce(t.timeGap)):("function"==typeof t.finish&&t.finish(t),clearTimeout(t.timeout))},formatTime:function(t){var n=Math.floor(t/86400),e=Math.floor((t-60*n*60*24)/3600),i=Math.floor((t-60*n*60*24-60*e*60)/60),o=t-60*n*60*24-60*e*60-60*i;return[n,e,i,o]},changeTime:function(t){this.curCount=t,this.onChangeTime&&this.onChangeTime(this,t)}},e.exports=i});
;define("common:widget/video/floatPlay/util.js",function(e,n,t){var i={getShortVideoUri:function(e,n){if(e){if(0===e.indexOf("/kan/")||0===e.indexOf("/watch/"))return n?"http://v.baiud.com"+e:"http://v.baidu.com"+e+(-1!==e.indexOf("?")?"&":"?")+"format=json";var t=e.split("/");if(t.length>4&&("kan"===t[3]||"watch"===t[3]))return t[2]="v.baidu.com",n?t.join("/"):t.join("/")+(-1!==e.indexOf("?")?"&":"?")+"format=json"}return null},getItemByKey:function(e,n,t){var i=null;return $.each(e,function(e,r){return r[n]===t?(i=r,!1):void 0}),i},isPageFullscreen:function(e){var n=window.navigator.userAgent.toLowerCase();if(n.indexOf("chrome")>0){if(e.scrollHeight===window.screen.height&&e.scrollWidth===window.screen.width)return!0}else if(window.outerHeight===screen.height&&window.outerWidth===screen.width)return!0;return!1},timeToSecond:function(e){var n=0;e=e.split(":");for(var t=e.length,i=0;i<e.length;i++){var r=parseInt(e[i],10);n+=r*Math.pow(60,t-i-1)}return n}};t.exports=i});
;define("common:widget/video/floatPlay/floatPlay.js",function(e,t,n){var o=__usebyinline__=function(){function e(e,t){"object"==typeof e&&(t=e,e=t.constructor||function(){}),delete t.constructor;var n={},o=function(){e.apply(this,arguments)};for(var a in e.prototype)e.prototype.hasOwnProperty(a)&&(n[a]=e.prototype[a]);for(var a in t)t.hasOwnProperty(a)&&(n[a]=t[a]);return n.constructor=e.prototype.constructor,o.prototype=n,o}function t(e,t){return Object.prototype.hasOwnProperty.call(e,"shimed")?e:(t=t||Object.prototype.toString.call(e).match(/^\[object ([a-zA-Z]+)\]$/)[1],new(o[t.toLowerCase()])(e))}var n={},o={},a=window.document;return o.array=o.htmlcollection=o.nodelist=e({constructor:function(e){this.value=e,this.shimed=!0},forEach:function(e){for(var t,n=0;n<this.value.length&&(t=e(this.value[n]),"break"!=t);n++);return this},map:function(e){for(var t=0;t<this.value.length;t++)this.value[t]=e(this.value[t]);return this},indexOf:function(){},filter:function(){}}),o.object=e({constructor:function(e){this.value=e,this.shimed=!0},assign:function(){if(arguments.length)for(var e=0;e<arguments.length;e++)if("object"==typeof arguments[e])for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(this.value[t]=arguments[e][t]);return this},keys:function(){var e=[];for(var t in this.value)this.value.hasOwnProperty(t)&&e.push(t);return new o.array(e)},has:function(){}}),n.shim=t,n.jsonToQuery=function(e){var n=t(e).keys().map(function(t){return t+"="+e[t]});return n.value.join("&")},n.queryToJson=function(e){var n={},o=e.split("&");return t(o).forEach(function(e){if(e){var t=e.split("=");t[0]&&t[1]&&(n[t[0]]=t[1])}}),n},n.jsonParse=function(e){if(window.JSON&&window.JSON.parse)try{return window.JSON.parse(e+"")}catch(t){throw t}else Function("return "+e)()},n.jsonStringify=function(e){if(window.JSON&&window.JSON.stringify)try{return window.JSON.stringify(e)}catch(t){throw t}if("[object Array]"===Object.prototype.toString.call(e)){for(var o=[],a=0;a<e.length;a++)o.push(n.jsonStringify(e[a]));return"["+o.join(",")+"]"}if("[object Object]"===Object.prototype.toString.call(e)){var o=[];for(var r in e)e.hasOwnProperty(r)&&o.push('"'+r+'":'+n.jsonStringify(e[r]));return"{"+o.join(",")+"}"}return"[object Function]"===Object.prototype.toString.call(e)||"[object Null]"===Object.prototype.toString.call(e)?"null":"[object Number]"===Object.prototype.toString.call(e)?e.toString():'"'+e.toString()+'"'},n.getRandom=function(){return Math.floor(2147483648*Math.random()).toString(32)},n.jsonParse=function(e){return window.JSON&&window.JSON.parse?window.JSON.parse(e+""):void Function("return "+e)()},n.trim=function(e){return e?(e+="",e=e.replace(/^(\s+)?/g,""),e=e.replace(/((?:.+)(?:\S))?(\s+)$/g,"$1")):""},n.globalEval=function(e){e&&n.trim(e)&&(window.execScript||function(e){window.eval.call(window,e)})(e)},n.sendlog=function(e){var t=new Image,o="video_ajax_log_"+n.getRandom();window[o]=t,t.onload=t.onerror=t.onabort=function(){try{delete window[o]}catch(e){window[o]=void 0}t=null},e+=e.indexOf("?")>-1?"&":"?",e+=".stamp="+Math.random(),t.src=e},n.log=function(e){return e?"string"==typeof e?n.sendlog(e):void t(e).forEach(function(e){n.sendlog(e)}):void 0},n.broswser=new(e({constructor:function(){this.ua=window.navigator.userAgent,this.re=window.RegExp,this.name="",this.os="",this.version="",this.regs={ieLow:/(?:ms|\()(ie)\s([\w\.]+)/i,ieHig:/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i,webkit:/(webkit)\/([\w\.]+)/i,gecko:/rv\:([\w\.]+).*(gecko)/i,presto:/(presto)\/([\w\.]+)/i,mac:/(macintosh|mac(?=_powerpc)\s)/i,ios:/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i,android:/(android)[\/\s-]?([\w\.]+)*/i},this.checkBrowser()},checkBrowser:function(){var e=this;t(["ieLow","ieHig","webkit","gecko","presto"]).forEach(function(t){return e.regs[t].test(e.ua)?(e.name=e.re.$1.toLowerCase(),"ieHig"===t&&(e.name="ie"),e.version=e.re.$2,"break"):void 0}),t(["mac","ios","android"]).forEach(function(t){return e.regs[t].test(e.ua)?(e.os=t,"break"):void 0})}})),n.cookie={isValidKey:function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)},getRaw:function(e){if(n.cookie.isValidKey(e)){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),o=t.exec(a.cookie);if(o)return o[2]||null}return null},get:function(e){var t=n.cookie.getRaw(e);return"string"==typeof t?t=decodeURIComponent(t):null},setRaw:function(e,t,o){if(n.cookie.isValidKey(e)){o=o||{};var r=o.expires;"number"==typeof o.expires&&(r=new Date,r.setTime(r.getTime()+o.expires)),a.cookie=e+"="+t+(o.path?"; path="+o.path:"")+(r?"; expires="+r.toGMTString():"")+(o.domain?"; domain="+o.domain:"")+(o.secure?"; secure":"")}},remove:function(e,t){t=t||{},t.expires=new Date(0),n.cookie.setRaw(e,"",t)},set:function(e,t,o){n.cookie.setRaw(e,encodeURIComponent(t),o)}},n.event={isSupportTouch:!!("ontouchstart"in window),touchMap:{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend",touchcancel:"touchcancel",click:"touchstart"},on:function(e,o,a,r){"function"==typeof a&&(r=a,a="");var i=function(o){if(o.type in n.event.touchMap){if((new Date).getTime()-i.timespan<50)return;i.timespan=(new Date).getTime()}var o=o||window.event;if(o.preventDefault||(o.preventDefault=function(){o.returnValue=!1}),o.stopPropagation||(o.stopPropagation=function(){o.cancelBubble=!0}),o.srcElement&&(o.target=o.srcElement),o.touches&&o.touches[0]&&(o.pageX=o.touches[0].pageX,o.pageY=o.touches[0].pageY),a){var s=n.query(e,a),c=!1;if(t(s,"array").forEach(function(e){return e&&e.contains&&e.contains(o.target)||e===o.target?(c=!0,"break"):void 0}),!c)return}r(o)};i.timespan=(new Date).getTime(),r.callee=i,e.addEventListener?(e.addEventListener(o,i,!1),n.event.isSupportTouch&&n.event.touchMap[o]&&"click"!==o&&e.addEventListener(n.event.touchMap[o],i,!1)):e.attachEvent&&e.attachEvent("on"+o,i)},off:function(e,t,o){o.callee||(o.callee=o),e.addEventListener?(e.removeEventListener(t,o.callee,!1),n.event.isSupportTouch&&n.event.touchMap[t]&&e.removeEventListener(n.event.touchMap[t],o.callee,!1)):e.attachEvent&&e.detachEvent("on"+t,o.callee)},trigger:function(e,t){var n;if(document.createEvent)n=document.createEvent("Events"),n.initEvent(t,!0,!0);else{if(!document.createEventObject)return;n=document.createEventObject()}n.target=e,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent&&e.fireEvent(t,n)}},n.className={has:function(e,t){var n=" "+e.className+" ",o=new RegExp("\\s"+t+"\\s");return o.test(n)?!0:!1},add:function(e,o){e.length&&e.length>0?t(e).forEach(function(e){n.className.has(e,o)||(e.className=n.trim(e.className+" "+o))}):n.className.has(e,o)||(e.className=n.trim(e.className+" "+o))},remove:function(e,o){var a=new RegExp("\\s"+o+"\\s","g");if(e.length&&e.length>0)t(e).forEach(function(e){var t=" "+e.className+" ";a.test(t)&&(t=n.trim(t.replace(a," ")),e.className=t.replace(/\s+/g," "))});else{var r=" "+e.className+" ";a.test(r)&&(r=n.trim(r.replace(a," ")),e.className=r.replace(/\s+/g," "))}}},n.query=function(e,t){function n(e,t,a){var r=a[t],i=e.children;if(i&&i.length)for(var s=0;s<i.length;s++){var c=i[s],l=r.match(/\.(\S+)/),u=r.match(/\#(\S+)/),p=r.match(/\[(.+)\]/),f=!1;if(l){var d=" "+c.className+" ",h=new RegExp("\\s"+l[1]+"\\s");h.test(d)&&(f=!0)}else if(u)c.id&&c.id.toUpperCase()===r.toUpperCase()&&(f=!0);else if(p){var v=p[1].split("="),m=v[0],g=v[1]||"";c.getAttribute(m)===g&&(f=!0)}else c.tagName&&c.tagName.toUpperCase()===r.toUpperCase()&&(f=!0);f?a[t+1]?n(c,t+1,a):o.push(c):n(c,t,a)}}var o=[];if("string"==typeof e)t=e.toString(),e=a.body;else if(!t||"string"!=typeof t)return e;if(e.querySelectorAll)return e.querySelectorAll(t);t=t.replace(/\s+/g," ");var r=t.split(" ");if(e===a.body){var i=r[0].match(/\#(\S+)/);i&&(e=a.getElementById(i[1]),r.shift(),e&&!r.length&&o.push(e))}return r.length&&n(e,0,r),o},n.proxy=function(e,t){return function(){e.apply(t,arguments)}},n.ajax=function(e){e=t({type:"GET",data:{},callbackname:"",charset:"utf-8",dataType:"json",success:function(){},error:function(){}}).assign(e).value;var o=e.callbackname||"video_ajax_callback_"+n.getRandom(),r=a.createElement("script"),i=a.getElementsByTagName("head")[0]||a.body;window[o]=function(t){e.success(t),window[o]=null},r.onload=function(){r.parentNode.removeChild(r)},r.charset=e.charset,r.async=!1,r.src=e.url+(-1===e.url.indexOf("?")?"?":"&")+n.jsonToQuery(t({}).assign(e.data,{callback:o}).value),i.insertBefore(r,i.firstChild)},n.ready=function(){var e,t=!1,o=[],r=0,i=function(){if(r++,a.readyState&&"complete"===a.readyState&&(t=!0),"ie"===n.broswser.name&&n.broswser.version<9)try{a.documentElement.doScroll("left"),t=!0}catch(i){}if(t)for(clearInterval(e);o.length;){var s=o.splice(0,1);s[0]()}r>5e3&&clearInterval(e)};return e=setInterval(i,50),n.event.on(a,"DOMContentLoaded",function(){t=!0,i()}),n.event.on(window,"load",function(){t=!0,i()}),function(e){"function"==typeof e&&(t?e():o.push(e))}}(),n.swf={embed:function(e){var o=e.wrap,a="transparent";if(e.wrap&&"string"==typeof e.wrap)var o=n.query(e.wrap)[0];e.vars&&"object"==typeof e.vars&&(e.vars=n.jsonToQuery(e.vars)),e.movie=e.url,e.data=e.url,e.flashvars=e.vars,location.href.indexOf("baidu.com/kan/play/xdplay?url")&&(a="direct");var r=t({align:"middle",classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",codebase:"http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0",wmode:a,allowscriptaccess:"never",type:"application/x-shockwave-flash",width:"100%",height:"100%",allowfullscreen:!0}).assign(e).value,i='<div class="no-flash-tips">您的flash可能被禁用或版本过低,为了能够正常观看视频，请您<a href="http://get.adobe.com/cn/flashplayer/?no_redirect" target="_blank" class="a-flash-link" static="stp=clickopenflash">点这里启用Flash</a></div>',s="<object";"ie"===n.broswser.name&&n.broswser.version<11?(t(["classid","codebase","id","width","height","align"]).forEach(function(e){r[e]&&(s+=" "+e+"="+r[e])}),s+=">",t(["movie","flashvars","wmode","allowscriptaccess","allowfullscreen","scale","salign"]).forEach(function(e){r[e]&&(s+=" <param name="+e+" value="+r[e]+" />")}),s+=i+"</object>"):(t(["id","width","height","align","data","type"]).forEach(function(e){r[e]&&(s+=" "+e+"="+r[e])}),s+=">",t(["flashvars","wmode","allowscriptaccess","allowfullscreen","scale","salign"]).forEach(function(e){r[e]&&(s+=" <param name="+e+" value="+r[e]+" />")}),s+=i+"</object>"),o.innerHTML=s},exec:function(e,t){var n=a.getElementById(e);if(n&&"OBJECT"===n.nodeName){var o=arguments;n[t]?n[t].apply(n,Array.prototype.slice.call(o,2)):setTimeout(function(){o.callee.apply(null,o)},200)}},remove:function(e){var t=a.getElementById(e);t&&"OBJECT"===t.nodeName&&("ie"===n.broswser.name&&n.broswser.version<11?(t.style.display="none",function(){if(4===t.readyState){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}else setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))},support:function(){var e=!1;try{e=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){e="undefined"!=typeof navigator.mimeTypes["application/x-shockwave-flash"]}return e}()},n.tmpl=function(){var e={};return function t(n,o){var a=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[n]=e[n]||t(document.getElementById(n).innerHTML);return o?a(o):a}}(),n.getDebugLogUrl=function(e,t,o){var a="http://pc.videoclick.baidu.com/u.gif?";try{t=t||0,o=o||"PCfrontvideo";var r="";r=encodeURIComponent(window.parent===window||window.self===window.top?location.href:document.referrer);var i={state:e,position:o,site:r,sync:t},s="";n.shim(i).keys().forEach(function(e){var t="&"+e+"="+i[e];s+=t}),a+=s}catch(c){a=""}return a},n.debugLog=function(e){var t=new Image;e=e+"&stamp="+Math.random(),t.src=e},n}(),a=e("common:static/vendor/underscore/underscore.js"),r=e("common:static/ui/eventcenter/eventcenter.js"),i=e("common:widget/video/floatPlay/util.js"),s="",c=function(e){this.opt=e,this.init()};c.prototype.init=function(){this.addListener()},c.prototype.addListener=function(){$(".float-play-layer").on("click",".player-close-button",this.close),$(".float-play-layer").on("click",".player-next-button",a.debounce(this.goNext,300)),$(document).on("click","a.a-pic",this.open),$(document).on("click","a.a-carousel-poster",this.open),$("#squareVideos")&&$(document).on("click","a.poster",this.open);var e=this;$(document).keyup(function(t){if(27===t.keyCode){var n=i.isPageFullscreen($(".float-play-layer")[0]);n||e.close()}})},c.prototype.open=function(e){if(s=$(this).next(".a-title").find(".title").text(),$(".player-esc-hint").fadeIn("slow"),setTimeout(function(){$(".player-esc-hint").fadeOut(2e3)},3e3),"ie"!==o.broswser.name&&"1"==$(this).data("baishi")){var t=i.getShortVideoUri(this.href);t&&(e.preventDefault(),$(".float-play-layer").removeClass("none"),$(".float-play-layer").addClass("open"),$("html").addClass("hide-scrollbar"),setTimeout(function(){$.ajax({url:t,dataType:"jsonp",success:function(e){e.data&&(r.trigger("bdv-float-play.play",e.data),r.trigger("bdv-float-play.list",e.data.video_show_recommend))}})},200))}},c.prototype.close=function(){$(".float-play-layer").removeClass("open"),$(".float-play-layer").addClass("none"),$("html").removeClass("hide-scrollbar"),r.trigger("bdv-float-play.close")},c.prototype.goNext=function(){r.trigger("bdv-float-play.next")},c.prototype.plog=function(e){var t="http://pc.videoclick.baidu.com/p.gif?pid=104&tn=kanShort_layer&tpl=kanShort_layer&page=indsa&refer="+this.opt.refer+"&uid="+this.opt.uid;$.log(t+"&"+encodeURI(e))},c.prototype.vlog=function(e){var t="http://pc.videoclick.baidu.com/v.gif?pid=104&tn=kanShort_layer&tpl=kanShort_layer&page=indsa&bl=floatPlay&refer="+this.opt.refer+"&wd="+s+"&uid="+this.opt.uid;$.log(t+"&"+encodeURI(e))},n.exports=c});
;define("common:widget/video/floatPlay/sitePlayUrl.js",function(n,r,a){function t(n,r,a){return e[n]?e[n].call(this,r,a):r}var e={fengxing:function(){{var n=arguments[0];arguments[1]}return n=n.replace(/&startAd=(\d+)/,""),n+="&startAd=0"},ku6:function(){{var n=arguments[0];arguments[1]}return n=n.replace(/&adss=(\d+)/,""),n+="&adss=0"},letv:function(){{var n=arguments[0];arguments[1]}return n=n.replace(/&ark=(\d+)/,""),n+="&ark=100"},baomihua:function(){{var n=arguments[0];arguments[1]}return n=n.replace(/&at=(\d+)/,""),n+="&at=100"},v1:function(){{var n=arguments[0];arguments[1]}return n=n.replace(/&showAD=(true|false)/,""),-1===n.indexOf("?")&&(n+="?"),n+="&showAD=false"},boosj:function(){{var n=arguments[0];arguments[1]}return n=n.replace(/&a=(\d+)/,""),-1===n.indexOf("?")&&(n+="?"),n+="&a=0"},yinyuetai:function(){{var n=arguments[0];arguments[1]}return window.com||(window.com={}),window.com.yinyuetai||(window.com.yinyuetai={}),window.com.yinyuetai.amovid=function(){return"5f4ffbc12418024a87"},n},wasu:function(){{var n=arguments[0];arguments[1]}return n=n.replace(/sv\/(\d+)/,"sv/1")},xiaokaxiu:function(){{var n=arguments[0];arguments[1]}return n+="&notifyjs=true"},56:function(){{var n=arguments[0];arguments[1]}return n+="&topBarNor=0"},"default":function(){{var n=arguments[0];arguments[1]}return n}};a.exports=t});
;define("common:widget/video/floatPlay/union_config.js",function(t,i){function n(t){o[t]?o[t].init():(window.SITE_PLAY_COMPLETE_CALLBACK=function(i){i[t]&&(o[t]={init:function(){i[t](function(){e.trigger("global.playEnd")},$)}},o[t].init())},$.getScript("http://vs3.bdstatic.com/sitePlayerConf/playcomplete.js"))}var e=t("common:static/ui/eventcenter/eventcenter.js"),o={};o.ku6={init:function(){window.Player=window._js_PlayerHelper=new this.Player({events:{init:function(){},end:function(){e.trigger("global.playEnd")}}}),window.PlayComplete=function(){e.trigger("global.playEnd")}},Player:function(){this.init.apply(this,arguments)}},o.ku6.Player.prototype={constructor:o.ku6.Player,init:function(t){this.setOptions(t);var i=this,n=i.options;i.container=document.getElementById(n.container),i.swf={object:document.getElementById(n.id)},i.ready||(i.ready=!0),i.setEvent(n.events)},setEvent:function(t){for(var i in t)this.addEvent(i,t[i])},fire:function(t,i,n){var e=this,o=(e.options,"init");switch(t){case"init":case"initPlayerFinished":e.ready=!0,t=o;break;case"playFinished":t="end"}t===o||e.ready||e.fire(o,i,n),this.fireEvent(t)},setOptions:function(t){this.options={container:"playBox",id:"videoPlayer",ready:!1};for(var i in t)this.options[i]=t[i]},addEvent:function(t,i){this.queue||(this.queue={}),this.queue[t]?this.queue[t].push(i):this.queue[t]=[i]},fireEvent:function(t){if(this.queue){var i=this.queue[t];if(i)for(var n=0,e=i.length;e>n;n++)i[n]&&i[n].apply(this,arguments[1]||[])}}},i.init=n});
;define("common:widget/video/floatPlay/playContainer/playContainer.js",function(e,t){function n(e){d=e}function o(e){if(e&&e.video_show_current){s(e);var t=e.video_show_current;if(window.__ADVfront_duration__=t.duration,e.video_show_recommend&&e.video_show_recommend.videos){var n=e.video_show_recommend.videos.filter(function(e){return!e.is_ad||1!==Number(e.is_ad)}),o=e.video_show_recommend.current_index>>0;o>=0&&o<n.length&&(t=n[o])}i(t),u(e),l(e.video_show_current,s(e))}}function a(e){window.frontAdCompleteTimer&&clearTimeout(window.frontAdCompleteTimer),e&&(i(e),c(e.url,function(e){u(e),l(e.video_show_current,s(e))}))}function r(){window.frontAdCompleteTimer&&clearTimeout(window.frontAdCompleteTimer),$("#floatPlayBox").html('<p class="loading">加载中...</p>'),$(".play-info .site-logo-link").hide(),$(".play-info .title a").html(""),$(".play-info .title a").attr("title",""),$(".play-info .title a").attr("href",""),$(".play-info .play-num span").html(""),window.admPlayer&&window.admPlayer.clearTimer()}function i(e){if(e){e.url=v.getShortVideoUri(e.url,!0),$(".play-info .site-logo-link").hide(),$(".play-info .title a").html(e.title),$(".play-info .title a").attr("title",e.title),$(".play-info .title a").attr("href",e.url+"?fr="+location.host+location.pathname);var t="http://v.baidu.com/reporter.html?&title="+encodeURIComponent(e.title)+"&url="+encodeURIComponent(e.url);$(".float-report").attr("href",t);var n=Number(e.play_num);1e4>n?n+="次":n=(n/1e4).toFixed(1)+"万次",$(".play-info .play-num span").html(n)}}function c(e,t){var n=v.getShortVideoUri(e);n&&$.ajax({url:n,dataType:"jsonp",success:function(e){e&&e.data&&e.data.video_show_current&&t(e.data)}})}function l(e,t){if(e){var n=0,o=!1,a=p(t.name,e.play_url,n);window.advPlayComplete=function(){function n(e){try{return 100===Math.floor(e.PercentLoaded())}catch(t){return e.style="opacity: 1",!1}}if(!o)if(o=!0,$.swf.remove("playVideo"),$("#videoFrontAdvContianer").remove(),window.admPlayer&&window.admPlayer.clearTimer(),t.isFrame)$("#floatPlayBox").html("rr.tv"===e.site_url?'<iframe src="'+e.play_url+'" frameborder="0" scrolling="no" allowtransparency="true" allowfullscreen="true" style="width:100%;height:100%;"></iframe>':'<iframe src="'+e.play_url+(-1!==e.play_url.indexOf("?")?"":"?")+"proxyurl=http://"+location.host+'/crossdomainproxy.html" frameborder="0" scrolling="no" allowtransparency="true" style="width:100%;height:100%;"></iframe>');else{var r=a.match(/^http:\/\/list.video.baidu.com\/swf\/ecomAdvPlayer.swf.+?video=(.+)/);if(r)new d({wrap:document.getElementById("floatPlayBox"),autoplay:!0,video:[{play_url:decodeURIComponent(r[1])}]});else{var i={id:"videoPlayer",url:a,wrap:document.getElementById("floatPlayBox"),autoplay:!0,allowscriptaccess:"always"};t.salign&&(i.salign=t.salign),t.scale&&(i.scale=t.scale),i.vars=t.flashVars?t.flashVars:"",d.swf.embed(i),setTimeout(function(){var e=$("#videoPlayer")[0];e.style="opacity: 0";var t=setInterval(function(){n(e)&&(setTimeout(function(){e.style="opacity:1"},500),clearInterval(t)),h.swf.support||(e.style="opacity:1",clearInterval(t))},50)},0)}}},document.getElementById("videoFrontAdvContianer")||window.advPlayComplete()}}function s(e){var t={},n={name:"bdys",layout:"one",uinfo:"",domain:"baidu.yingshi.com",flashVars:"",isContinuous:1,isFrame:!1};return e.page_config?(t=e.page_config,t.uinfo=n.uinfo):t=n,e.video_show_current.pgc_vid&&e.video_show_current.play_link&&/ku6.com/.test(e.video_show_current.play_link)&&(t.name="ku6",t.flashVars={adss:"0"}),e.video_show_current.site_url&&"rr.tv"===e.video_show_current.site_url&&(t.isFrame=!0),window.__VIDEO_SITE__=t.name,f.trigger("bdv-float-play.plog","u="+e.video_show_current.site_play_url+"&wd="+e.video_show_current.title+"&site="+t.name+"&no="+(e.video_show_recommend?e.video_show_recommend.current_index+1:0)),m.init(t.name),t}function u(e){function t(e){return window.$?void $(e):void(document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),e()},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),e())}))}var n=(e.frontAdvConfig,e.video_show_current),o=e.video_show_recommend;window.__VIDEO_CURRENT_ID__=n.url.match(/(\d*).html/)&&n.url.match(/(\d*).html/)[1],n&&(window.__VIDEO_INFO_COLLECTION__={duration:n.duration,pgc_uid:n.pgc_uid?n.pgc_uid:"",pgc_vid:n.pgc_vid?n.pgc_vid:"",no:o?o.current_index+1:0,backadv:"4041822"});try{window.admPlayer&&window.admPlayer.clearTimer();try{var a="";window.__VIDEO_INFO_COLLECTION__&&(a=window.__VIDEO_INFO_COLLECTION__.duration||"",a=v.timeToSecond(a)),$("#floatPlayBox").html('<div id="iframe_wrap"></div><div id="videoFrontAdvContianer" style="width:100%;height:100%;" class="bdv-video-player-contianer"></div>'),BAIDU_VIDEO_ADM_FILL_ASYC("PCfrontvideo","videoFrontAdvContianer",null,{type:"videoAdv",noCache:!0,onError:function(){clearTimeout(window.adAsyncTimeoutCheck),$(document).ready(function(){advPlayComplete()})},arguments:{advtype:"floatPlay",duration:a||""}}),window.adAsyncTimeout=!1,clearTimeout(window.adAsyncTimeoutCheck),window.adAsyncTimeoutCheck=setTimeout(function(){t(function(){advPlayComplete()}),window.adAsyncTimeout=!0},5e3)}catch(r){setTimeout(function(){window.advPlayLog("http://pc.videoclick.baidu.com/u.gif?pid=104&bl=adblock&tpl=PCfrontvideo&ext=floatPlay")},0)}var i="adframe_wrap_"+Math.round(1e6*Math.random());document.getElementById("iframe_wrap").innerHTML='<iframe id="'+i+'" src="about:blank" width="0" height="0" style="margin:0 auto 0" allowTransparency="true" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border:0px;"></iframe>';var c=document.getElementById(i),l=c.contentWindow.document;l.open(),l.write('<script type="text/javascript" >window["__VIDEO_SITE__"]=parent.__VIDEO_SITE__;window["__VIDEO_INFO_COLLECTION__"]=parent.__VIDEO_INFO_COLLECTION__;window["__VIDEO_FR__"]=parent.__VIDEO_FR__;window["__ADV_MUTE__"]=parent.__ADV_MUTE__;window["__front_adv_main__"]=parent.__front_adv_main__;</'),l.write("script></body></html>"),l.close()}catch(r){document.getElementById("videoFrontAdvContianer")&&($.swf.remove("playVideo"),$("#videoFrontAdvContianer").remove()),window.advPlayLog("http://pc.videoclick.baidu.com/u.gif?pid=104&bl=adblock&tpl=PCfrontvideo&ext=floatPlay")}}var d,f=e("common:static/ui/eventcenter/eventcenter.js"),p=e("common:widget/video/floatPlay/sitePlayUrl.js"),m=e("common:widget/video/floatPlay/union_config.js"),v=e("common:widget/video/floatPlay/util.js"),h=__usebyinline__=function(){function e(e,t){"object"==typeof e&&(t=e,e=t.constructor||function(){}),delete t.constructor;var n={},o=function(){e.apply(this,arguments)};for(var a in e.prototype)e.prototype.hasOwnProperty(a)&&(n[a]=e.prototype[a]);for(var a in t)t.hasOwnProperty(a)&&(n[a]=t[a]);return n.constructor=e.prototype.constructor,o.prototype=n,o}function t(e,t){return Object.prototype.hasOwnProperty.call(e,"shimed")?e:(t=t||Object.prototype.toString.call(e).match(/^\[object ([a-zA-Z]+)\]$/)[1],new(o[t.toLowerCase()])(e))}var n={},o={},a=window.document;return o.array=o.htmlcollection=o.nodelist=e({constructor:function(e){this.value=e,this.shimed=!0},forEach:function(e){for(var t,n=0;n<this.value.length&&(t=e(this.value[n]),"break"!=t);n++);return this},map:function(e){for(var t=0;t<this.value.length;t++)this.value[t]=e(this.value[t]);return this},indexOf:function(){},filter:function(){}}),o.object=e({constructor:function(e){this.value=e,this.shimed=!0},assign:function(){if(arguments.length)for(var e=0;e<arguments.length;e++)if("object"==typeof arguments[e])for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(this.value[t]=arguments[e][t]);return this},keys:function(){var e=[];for(var t in this.value)this.value.hasOwnProperty(t)&&e.push(t);return new o.array(e)},has:function(){}}),n.shim=t,n.jsonToQuery=function(e){var n=t(e).keys().map(function(t){return t+"="+e[t]});return n.value.join("&")},n.queryToJson=function(e){var n={},o=e.split("&");return t(o).forEach(function(e){if(e){var t=e.split("=");t[0]&&t[1]&&(n[t[0]]=t[1])}}),n},n.jsonParse=function(e){if(window.JSON&&window.JSON.parse)try{return window.JSON.parse(e+"")}catch(t){throw t}else Function("return "+e)()},n.jsonStringify=function(e){if(window.JSON&&window.JSON.stringify)try{return window.JSON.stringify(e)}catch(t){throw t}if("[object Array]"===Object.prototype.toString.call(e)){for(var o=[],a=0;a<e.length;a++)o.push(n.jsonStringify(e[a]));return"["+o.join(",")+"]"}if("[object Object]"===Object.prototype.toString.call(e)){var o=[];for(var r in e)e.hasOwnProperty(r)&&o.push('"'+r+'":'+n.jsonStringify(e[r]));return"{"+o.join(",")+"}"}return"[object Function]"===Object.prototype.toString.call(e)||"[object Null]"===Object.prototype.toString.call(e)?"null":"[object Number]"===Object.prototype.toString.call(e)?e.toString():'"'+e.toString()+'"'},n.getRandom=function(){return Math.floor(2147483648*Math.random()).toString(32)},n.jsonParse=function(e){return window.JSON&&window.JSON.parse?window.JSON.parse(e+""):void Function("return "+e)()},n.trim=function(e){return e?(e+="",e=e.replace(/^(\s+)?/g,""),e=e.replace(/((?:.+)(?:\S))?(\s+)$/g,"$1")):""},n.globalEval=function(e){e&&n.trim(e)&&(window.execScript||function(e){window.eval.call(window,e)})(e)},n.sendlog=function(e){var t=new Image,o="video_ajax_log_"+n.getRandom();window[o]=t,t.onload=t.onerror=t.onabort=function(){try{delete window[o]}catch(e){window[o]=void 0}t=null},e+=e.indexOf("?")>-1?"&":"?",e+=".stamp="+Math.random(),t.src=e},n.log=function(e){return e?"string"==typeof e?n.sendlog(e):void t(e).forEach(function(e){n.sendlog(e)}):void 0},n.broswser=new(e({constructor:function(){this.ua=window.navigator.userAgent,this.re=window.RegExp,this.name="",this.os="",this.version="",this.regs={ieLow:/(?:ms|\()(ie)\s([\w\.]+)/i,ieHig:/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i,webkit:/(webkit)\/([\w\.]+)/i,gecko:/rv\:([\w\.]+).*(gecko)/i,presto:/(presto)\/([\w\.]+)/i,mac:/(macintosh|mac(?=_powerpc)\s)/i,ios:/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i,android:/(android)[\/\s-]?([\w\.]+)*/i},this.checkBrowser()},checkBrowser:function(){var e=this;t(["ieLow","ieHig","webkit","gecko","presto"]).forEach(function(t){return e.regs[t].test(e.ua)?(e.name=e.re.$1.toLowerCase(),"ieHig"===t&&(e.name="ie"),e.version=e.re.$2,"break"):void 0}),t(["mac","ios","android"]).forEach(function(t){return e.regs[t].test(e.ua)?(e.os=t,"break"):void 0})}})),n.cookie={isValidKey:function(e){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(e)},getRaw:function(e){if(n.cookie.isValidKey(e)){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),o=t.exec(a.cookie);if(o)return o[2]||null}return null},get:function(e){var t=n.cookie.getRaw(e);return"string"==typeof t?t=decodeURIComponent(t):null},setRaw:function(e,t,o){if(n.cookie.isValidKey(e)){o=o||{};var r=o.expires;"number"==typeof o.expires&&(r=new Date,r.setTime(r.getTime()+o.expires)),a.cookie=e+"="+t+(o.path?"; path="+o.path:"")+(r?"; expires="+r.toGMTString():"")+(o.domain?"; domain="+o.domain:"")+(o.secure?"; secure":"")}},remove:function(e,t){t=t||{},t.expires=new Date(0),n.cookie.setRaw(e,"",t)},set:function(e,t,o){n.cookie.setRaw(e,encodeURIComponent(t),o)}},n.event={isSupportTouch:!!("ontouchstart"in window),touchMap:{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend",touchcancel:"touchcancel",click:"touchstart"},on:function(e,o,a,r){"function"==typeof a&&(r=a,a="");var i=function(o){if(o.type in n.event.touchMap){if((new Date).getTime()-i.timespan<50)return;i.timespan=(new Date).getTime()}var o=o||window.event;if(o.preventDefault||(o.preventDefault=function(){o.returnValue=!1}),o.stopPropagation||(o.stopPropagation=function(){o.cancelBubble=!0}),o.srcElement&&(o.target=o.srcElement),o.touches&&o.touches[0]&&(o.pageX=o.touches[0].pageX,o.pageY=o.touches[0].pageY),a){var c=n.query(e,a),l=!1;if(t(c,"array").forEach(function(e){return e&&e.contains&&e.contains(o.target)||e===o.target?(l=!0,"break"):void 0}),!l)return}r(o)};i.timespan=(new Date).getTime(),r.callee=i,e.addEventListener?(e.addEventListener(o,i,!1),n.event.isSupportTouch&&n.event.touchMap[o]&&"click"!==o&&e.addEventListener(n.event.touchMap[o],i,!1)):e.attachEvent&&e.attachEvent("on"+o,i)},off:function(e,t,o){o.callee||(o.callee=o),e.addEventListener?(e.removeEventListener(t,o.callee,!1),n.event.isSupportTouch&&n.event.touchMap[t]&&e.removeEventListener(n.event.touchMap[t],o.callee,!1)):e.attachEvent&&e.detachEvent("on"+t,o.callee)},trigger:function(e,t){var n;if(document.createEvent)n=document.createEvent("Events"),n.initEvent(t,!0,!0);else{if(!document.createEventObject)return;n=document.createEventObject()}n.target=e,e.dispatchEvent?e.dispatchEvent(n):e.fireEvent&&e.fireEvent(t,n)}},n.className={has:function(e,t){var n=" "+e.className+" ",o=new RegExp("\\s"+t+"\\s");return o.test(n)?!0:!1},add:function(e,o){e.length&&e.length>0?t(e).forEach(function(e){n.className.has(e,o)||(e.className=n.trim(e.className+" "+o))}):n.className.has(e,o)||(e.className=n.trim(e.className+" "+o))},remove:function(e,o){var a=new RegExp("\\s"+o+"\\s","g");if(e.length&&e.length>0)t(e).forEach(function(e){var t=" "+e.className+" ";a.test(t)&&(t=n.trim(t.replace(a," ")),e.className=t.replace(/\s+/g," "))});else{var r=" "+e.className+" ";a.test(r)&&(r=n.trim(r.replace(a," ")),e.className=r.replace(/\s+/g," "))}}},n.query=function(e,t){function n(e,t,a){var r=a[t],i=e.children;if(i&&i.length)for(var c=0;c<i.length;c++){var l=i[c],s=r.match(/\.(\S+)/),u=r.match(/\#(\S+)/),d=r.match(/\[(.+)\]/),f=!1;if(s){var p=" "+l.className+" ",m=new RegExp("\\s"+s[1]+"\\s");m.test(p)&&(f=!0)}else if(u)l.id&&l.id.toUpperCase()===r.toUpperCase()&&(f=!0);else if(d){var v=d[1].split("="),h=v[0],w=v[1]||"";l.getAttribute(h)===w&&(f=!0)}else l.tagName&&l.tagName.toUpperCase()===r.toUpperCase()&&(f=!0);f?a[t+1]?n(l,t+1,a):o.push(l):n(l,t,a)}}var o=[];if("string"==typeof e)t=e.toString(),e=a.body;else if(!t||"string"!=typeof t)return e;if(e.querySelectorAll)return e.querySelectorAll(t);t=t.replace(/\s+/g," ");var r=t.split(" ");if(e===a.body){var i=r[0].match(/\#(\S+)/);i&&(e=a.getElementById(i[1]),r.shift(),e&&!r.length&&o.push(e))}return r.length&&n(e,0,r),o},n.proxy=function(e,t){return function(){e.apply(t,arguments)}},n.ajax=function(e){e=t({type:"GET",data:{},callbackname:"",charset:"utf-8",dataType:"json",success:function(){},error:function(){}}).assign(e).value;var o=e.callbackname||"video_ajax_callback_"+n.getRandom(),r=a.createElement("script"),i=a.getElementsByTagName("head")[0]||a.body;window[o]=function(t){e.success(t),window[o]=null},r.onload=function(){r.parentNode.removeChild(r)},r.charset=e.charset,r.async=!1,r.src=e.url+(-1===e.url.indexOf("?")?"?":"&")+n.jsonToQuery(t({}).assign(e.data,{callback:o}).value),i.insertBefore(r,i.firstChild)},n.ready=function(){var e,t=!1,o=[],r=0,i=function(){if(r++,a.readyState&&"complete"===a.readyState&&(t=!0),"ie"===n.broswser.name&&n.broswser.version<9)try{a.documentElement.doScroll("left"),t=!0}catch(i){}if(t)for(clearInterval(e);o.length;){var c=o.splice(0,1);c[0]()}r>5e3&&clearInterval(e)};return e=setInterval(i,50),n.event.on(a,"DOMContentLoaded",function(){t=!0,i()}),n.event.on(window,"load",function(){t=!0,i()}),function(e){"function"==typeof e&&(t?e():o.push(e))}}(),n.swf={embed:function(e){var o=e.wrap,a="transparent";if(e.wrap&&"string"==typeof e.wrap)var o=n.query(e.wrap)[0];e.vars&&"object"==typeof e.vars&&(e.vars=n.jsonToQuery(e.vars)),e.movie=e.url,e.data=e.url,e.flashvars=e.vars,location.href.indexOf("baidu.com/kan/play/xdplay?url")&&(a="direct");var r=t({align:"middle",classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",codebase:"http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0",wmode:a,allowscriptaccess:"never",type:"application/x-shockwave-flash",width:"100%",height:"100%",allowfullscreen:!0}).assign(e).value,i='<div class="no-flash-tips">您的flash可能被禁用或版本过低,为了能够正常观看视频，请您<a href="http://get.adobe.com/cn/flashplayer/?no_redirect" target="_blank" class="a-flash-link" static="stp=clickopenflash">点这里启用Flash</a></div>',c="<object";"ie"===n.broswser.name&&n.broswser.version<11?(t(["classid","codebase","id","width","height","align"]).forEach(function(e){r[e]&&(c+=" "+e+"="+r[e])}),c+=">",t(["movie","flashvars","wmode","allowscriptaccess","allowfullscreen","scale","salign"]).forEach(function(e){r[e]&&(c+=" <param name="+e+" value="+r[e]+" />")}),c+=i+"</object>"):(t(["id","width","height","align","data","type"]).forEach(function(e){r[e]&&(c+=" "+e+"="+r[e])}),c+=">",t(["flashvars","wmode","allowscriptaccess","allowfullscreen","scale","salign"]).forEach(function(e){r[e]&&(c+=" <param name="+e+" value="+r[e]+" />")}),c+=i+"</object>"),o.innerHTML=c},exec:function(e,t){var n=a.getElementById(e);if(n&&"OBJECT"===n.nodeName){var o=arguments;n[t]?n[t].apply(n,Array.prototype.slice.call(o,2)):setTimeout(function(){o.callee.apply(null,o)},200)}},remove:function(e){var t=a.getElementById(e);t&&"OBJECT"===t.nodeName&&("ie"===n.broswser.name&&n.broswser.version<11?(t.style.display="none",function(){if(4===t.readyState){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}else setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))},support:function(){var e=!1;try{e=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){e="undefined"!=typeof navigator.mimeTypes["application/x-shockwave-flash"]}return e}()},n.tmpl=function(){var e={};return function t(n,o){var a=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[n]=e[n]||t(document.getElementById(n).innerHTML);return o?a(o):a}}(),n.getDebugLogUrl=function(e,t,o){var a="http://pc.videoclick.baidu.com/u.gif?";try{t=t||0,o=o||"PCfrontvideo";var r="";r=encodeURIComponent(window.parent===window||window.self===window.top?location.href:document.referrer);var i={state:e,position:o,site:r,sync:t},c="";n.shim(i).keys().forEach(function(e){var t="&"+e+"="+i[e];c+=t}),a+=c}catch(l){a=""}return a},n.debugLog=function(e){var t=new Image;e=e+"&stamp="+Math.random(),t.src=e},n}();t.init=n,t.doPlay=o,t.doUpdate=a,t.doClose=r});
;define("common:widget/video/floatPlay/playList/playList.js",function(require,exports,module){var Base=require("common:static/ui/oo/klass.js"),eventCenter=require("common:static/ui/eventcenter/eventcenter.js"),util=require("common:widget/video/floatPlay/util.js"),MAX_ITEMS_NUM=9,AUTO_REFRESH=!1,PlayList=Base.CC.sub({init:function(t){this.el=t.el,this.$videoList=this.el.find("#videoListRoot"),this.$prevBtn=this.el.find(".float-list-btn-prev"),this.$nextBtn=this.el.find(".float-list-btn-next"),this.doInit(t.data)},doInit:function(t){t&&t.videos&&(this.cache=this.extractFirst(t.videos,t.current_index),this.currentIndex=0,this.currentPage=0,this.currentVideoPage=0,this.totalPages=this.getTotalPageNum(this.cache),this.controlButtonVisible(this.$prevBtn,!1),this.totalPages>1?this.controlButtonVisible(this.$nextBtn,!0):this.controlButtonVisible(this.$nextBtn,!1),this.render(this.currentIndex,this.currentVideoPage))},tpls:{videos:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+='<ul class="video-items">\n    ';for(var i=0,items=videos,len=items.length;len>i;i++){__p+="\n        ";var d=items[i],classname="list-item";__p+="\n        \n        ",currentIndex==i&&(classname+=" current"),__p+="\n\n        ",0==i?(__p+="\n            ",classname+=" first",__p+="\n        "):i==len-1&&(__p+="\n              ",classname+=" last",__p+="\n        "),__p+="\n\n        ",d.is_ad&&(__p+="\n            ",classname+=" ad",__p+="\n        "),__p+="\n        ",!d.is_ad||d.url||d.title||(__p+="\n            ",classname+=" ad-hide",__p+="\n        "),__p+="\n        <li ",classname&&(__p+='class="'+(null==(__t=classname)?"":__t)+'"'),__p+=' data-url="'+(null==(__t=d.url)?"":__t)+'">\n            ',d.is_ad&&(__p+='\n              <a href="'+(null==(__t=d.url)?"":__t)+'" target="_blank">\n            '),__p+='\n                <span class="crop">\n                    <img class="crop-pic" src="'+(null==(__t=d.imgh_url)?"":__t)+'" />\n                    ',d.duration&&(__p+='\n                        <div class="crop-caption">\n                            <span class="crop-info">\n                                '+(null==(__t=d.duration)?"":__t)+"\n                            </span>\n                        </div>\n                    "),__p+='\n                </span>\n                <div class="title">\n                    <strong class="title-two-row">\n                        <span title="'+(null==(__t=d.title)?"":__t)+'">'+(null==(__t=d.title)?"":__t)+"</span>\n                    </strong>\n                </div>\n            ",d.is_ad&&(__p+="\n              </a>\n            "),__p+="\n        </li>\n     "}__p+="\n</ul>\n"}return __p}},events:{"click .video-items>.list-item:not(.current):not(.ad)":"onItemClick","click .float-list-btn-prev":"onPrevButtonClick","click .float-list-btn-next":"onNextButtonClick"},fetchData:function(t,e){if(t=util.getShortVideoUri(t)){var i=this;$.ajax({url:t,dataType:"jsonp",success:function(t){if(t.data){var n=t.data.video_show_recommend?t.data.video_show_recommend.videos:[];e&&n.unshift(e),i.doInit(n)}}})}},render:function(t,e){var i=this.getItemsByPage(e);if(i.length>0){var n={currentIndex:t,videos:i},s=this.getTpl("videos")(n);this.$videoList.html(s),$("#videoListRoot").mCustomScrollbar({horizontalScroll:!0,advanced:{autoExpandHorizontalScroll:!0}})}},onItemClick:function(t){$.cookie.set("autoloop","",{expires:-1});var e=$(t.currentTarget);this.doItemClick(e),eventCenter.trigger("bdv-float-play.vlog","u="+e.data("url")+"&ti="+e.find(".title span").text())},doItemClick:function(t){var e=$(t);e.siblings().removeClass("current"),e.addClass("current");var i=e.data("url"),n=this.cache;if(i){for(var s=i.match(/\/(\d+)\.html/g)||"",r=0,a=n.length;a>r;r++){var o=n[r].url.match(/\/(\d+)\.html/g);if(s&&o&&s[0]===o[0])var h=n[r]}eventCenter.trigger("bdv-float-play.update",h),e.hasClass("last")&&AUTO_REFRESH&&this.fetchData(i,h)}this.currentVideoPage=this.currentPage,this.currentIndex=e.index()},onPrevButtonClick:function(){this.currentPage>0&&(this.currentPage--,this.render(this.currentVideoPage===this.currentPage?this.currentIndex:-1,this.currentPage),this.controlButtonVisible(this.$nextBtn,!0)),this.currentPage<=0&&this.controlButtonVisible(this.$prevBtn,!1)},onNextButtonClick:function(){this.currentPage<this.totalPages-1&&(this.currentPage++,this.render(this.currentVideoPage===this.currentPage?this.currentIndex:-1,this.currentPage),this.controlButtonVisible(this.$prevBtn,!0)),this.currentPage>=this.totalPages-1&&this.controlButtonVisible(this.$nextBtn,!1)},goNext:function(){var t;if(this.currentVideoPage===this.currentPage)if(!AUTO_REFRESH&&(this.currentIndex+1>=MAX_ITEMS_NUM||this.currentPage*MAX_ITEMS_NUM+this.currentIndex+1>=this.cache.length)){if(this.currentPage+1>=this.totalPages?(this.currentVideoPage=0,t=this.cache[0],this.controlButtonVisible(this.$prevBtn,!1)):(t=this.cache[this.currentVideoPage*MAX_ITEMS_NUM+this.currentIndex+1],this.currentVideoPage++,this.controlButtonVisible(this.$prevBtn,!0)),this.currentPage=this.currentVideoPage,this.currentIndex=0,this.render(this.currentIndex,this.currentVideoPage),this.currentPage>=this.totalPages-1?this.controlButtonVisible(this.$nextBtn,!1):this.controlButtonVisible(this.$nextBtn,!0),t.is_ad)return void this.goNext();eventCenter.trigger("bdv-float-play.update",t)}else{var e=this.$videoList.find(".list-item").eq(this.currentIndex+1);if(e.hasClass("ad"))return e.hasClass("last")?(this.currentPage+1>=this.totalPages?(this.currentVideoPage=0,this.controlButtonVisible(this.$prevBtn,!1)):(this.currentVideoPage++,this.controlButtonVisible(this.$prevBtn,!0)),this.currentPage=this.currentVideoPage,this.currentIndex=-1,this.render(this.currentIndex,this.currentVideoPage),this.currentPage>=this.totalPages-1?this.controlButtonVisible(this.$nextBtn,!1):this.controlButtonVisible(this.$nextBtn,!0)):this.currentIndex++,void this.goNext();this.doItemClick(e)}else if(AUTO_REFRESH){if(this.currentVideoPage*MAX_ITEMS_NUM+this.currentIndex+1>=this.cache.length?(t=this.cache[0],this.currentIndex=0):t=this.cache[this.currentVideoPage*MAX_ITEMS_NUM+this.currentIndex+1],t.is_ad)return this.currentIndex++,void this.goNext();eventCenter.trigger("bdv-float-play.update",t),this.fetchData(t.url,t)}else{if(this.currentIndex+1>=MAX_ITEMS_NUM||this.currentVideoPage*MAX_ITEMS_NUM+this.currentIndex+1>=this.cache.length?(this.currentVideoPage+1>=this.totalPages?(this.currentVideoPage=0,t=this.cache[0],this.controlButtonVisible(this.$prevBtn,!1)):(t=this.cache[this.currentVideoPage*MAX_ITEMS_NUM+this.currentIndex+1],this.currentVideoPage++,this.controlButtonVisible(this.$prevBtn,!0)),this.currentPage=this.currentVideoPage,this.currentIndex=0,this.render(this.currentIndex,this.currentVideoPage),this.currentPage>=this.totalPages-1?this.controlButtonVisible(this.$nextBtn,!1):this.controlButtonVisible(this.$nextBtn,!0)):(t=this.cache[this.currentVideoPage*MAX_ITEMS_NUM+this.currentIndex+1],this.currentPage=this.currentVideoPage,this.currentPage>0?this.controlButtonVisible(this.$prevBtn,!0):this.controlButtonVisible(this.$prevBtn,!1),this.currentPage>=this.totalPages-1?this.controlButtonVisible(this.$nextBtn,!1):this.controlButtonVisible(this.$nextBtn,!0),this.render(++this.currentIndex,this.currentVideoPage)),t.is_ad)return void this.goNext();eventCenter.trigger("bdv-float-play.update",t)}},controlButtonVisible:function(t,e){e?t.removeClass("btn-disabled"):t.addClass("btn-disabled")},extractFirst:function(t,e){var i=t.filter(function(t){return!t.is_ad||1!==Number(t.is_ad)});if(e>>=0,e>=0&&e<i.length){var n=i[e];t.splice(t.indexOf(n),1),t.unshift(n)}return t},getTotalPageNum:function(t){return t&&t.length>0?Math.ceil(t.length/MAX_ITEMS_NUM):0},getPageNumByIndex:function(t){return Math.floor(t/MAX_ITEMS_NUM)},getItemsByPage:function(t){return this.totalPages&&t>=0&&t<this.totalPages?this.cache.slice(MAX_ITEMS_NUM*t,MAX_ITEMS_NUM*t+MAX_ITEMS_NUM):[]}});module.exports=PlayList});
;define("common:widget/video/footer/footer.js",function(t,a,e){e.exports=function(){$.ajax({url:"/kan/api/ipLocation",type:"GET",dataType:"json",success:function(t){var a='<li class="item_3"><a href="http://v.baidu.com/channel/guangchangwu" target="_blank" title="广场舞">广场舞</a></li>';t.data.city&&"北京"===t.data.city?$(".mod_footer_contentinfo .beauty-area-limit").replaceWith(a):$(".mod_footer_contentinfo .beauty-area-limit").removeClass("beauty-area-limit")}})}});
;define("common:widget/video/header/header.js",function(i,n,o){var d=i("common:static/ui/client/client.js");n=o.exports=function(i){$(function(){function n(){e.addClass("hdmini"),r.addClass("hdmini-body"),h=!0}function o(){a.stop().show(),e.removeClass("hdmini"),r.removeClass("hdmini-body"),h=!1}if("ie6"!==d.browser.ie){var s=$(window),e=$("#new-header-wrap"),a=e.find(".hd-inner"),r=$("body"),c=i&&i.searchpage?56:180,h=!1;i&&i.navMini?(e.addClass("hdmini"),r.addClass("hdmini-body"),a.show(),e.show(),h=!0):$(function(){s.scroll(function(){var i=s.scrollTop();i>c?!h&&n():h&&o()}),s.scrollTop()>c&&!h&&n()})}})}});
;define("common:widget/video/hoverPlayer/player.js",function(require,exports,module){function initHoverPlayer(t){var e,i,o=$(t.id),n={};$(document).on("mouseenter","[bdv-video-hover-play]",function(a){var r=this;a.preventDefault(),e=setTimeout(function(){var e=$(r),a=e.data("inited"),l=e.data("type"),d=e.data("id"),s=l+d,u=e.data("src");i&&i.stop(),a?(i=n[s],i&&i.play()):(e.data("inited",1),i=new HoverPlayer(o,{uid:s,type:l,id:d,src:window.decodeURIComponent(u),duration:e.data("duration"),poster:e.find("img").attr("src"),title:e.next().find(".title").text(),subtitle:e.next().find(".intro").text(),mark:e.find(".st-mark").text(),link:e.attr("href"),tpl:t.tpl,tn:t.tpl}),n[s]=i);var v=e.offset();o.find(".figure-video-main").height(e.height()+15),o.css({left:v.left-20,top:v.top-7,width:e.width()+40}).removeClass("hide").find("#"+s).removeClass("hide").siblings().addClass("hide")},200)}).on("mouseleave","[bdv-video-hover-play]",function(){clearTimeout(e)}).on("mouseleave",".hoverPlayer-content",function(){o.addClass("hide"),i&&i.stop()})}var HoverPlayer=function($dom,opt){this.opt=opt,this.playerTmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="hoverPlayer-content" id="'+(null==(__t=video.uid)?"":__t)+'" static="stp='+(null==(__t=video.type)?"":__t)+"&ext="+(null==(__t=video.id)?"":__t)+"&ti="+(null==(__t=encodeURIComponent(video.title))?"":__t)+'">\n    <a href="'+(null==(__t=video.link)?"":__t)+'" target="_blank"  class="hoverPlayer-video-outlink" static=\'area=0\'>\n        <div class="figure-video-main">\n            <video  src="'+(null==(__t=video.src)?"":__t)+'" loop muted  volume= 10 alt="'+(null==(__t=video.title)?"":__t)+'" class="figure-video"> \n            </video>\n        </div>\n        <div class="figure-video-start">\n            <i class="icon-start">\n                 \n            </i>\n        </div>\n        <div class="figure-video-tools">\n            <span class="figure-dur">'+(null==(__t=video.duration)?"":__t)+'秒</span>\n            <span class="figure-volume muted">\n                <i class="icon-volume">\n                    <svg width=18 height=18 viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <path d="M14.174,15.537l-0.686-0.726C15.031,13.352,16,11.291,16,9c0-2.291-0.969-4.352-2.512-5.811l0.813-0.861C15.99,3.976,17,6.35,17,9C17,11.578,15.91,13.896,14.174,15.537z M12.116,13.358l-0.686-0.726C12.395,11.72,13,10.432,13,9c0-1.432-0.605-2.72-1.57-3.631l0.686-0.726C13.274,5.736,14,7.281,14,9C14,10.719,13.274,12.264,12.116,13.358z M8.5,15.982L3.662,13H2H1v-1V6V5h1h1.662L8.5,2.018V2h1v14h-1V15.982z M8.5,3.21L4,5.984V6H2v6h2v0.016l4.5,2.773V3.21z" stroke="#fff"></path>\n                    </svg>\n                </i>\n                <i class="icon-novolume">\n                    <svg width=18 height=18 viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <path d="M17.995,12.328l-0.665,0.666L15,10.664l-2.329,2.329l-0.665-0.666l2.329-2.329l-2.329-2.329l0.665-0.666L15,9.333l2.329-2.329l0.665,0.666l-2.329,2.329L17.995,12.328z M9.5,16.982L4.662,14H3H2v-1V7V6h1h1.662L9.5,3.018V3h1v14h-1V16.982z M5,6.984V7H3v6h2v0.016l4.5,2.773V4.21L5,6.984z"  stroke="#fff"></path>\n                    </svg>\n                </i>\n            </span>\n        </div> \n        <div class="figure-video-cover"> \n            <img src="http://list.video.baidu.com/baiso/loading.png" alt="'+(null==(__t=video.title)?"":__t)+'" class="image-cover"> \n        </div>\n    </a> \n    <div class="hoverPlayer-video-content"> \n        <a href="'+(null==(__t=video.link)?"":__t)+'" target="_blank" static=\'area=2\' class="figure-title">\n            '+(null==(__t=video.title)?"":__t)+' \n        </a>\n        <div class="figure-subtitle"> \n            '+(null==(__t=video.subtitle)?"":__t)+"  \n        </div>\n    </div>\n</div>";return __p},this.$dom=$dom,this.duration=opt.duration,this.init()};HoverPlayer.prototype.init=function(){var t=this.playerTmpl({video:this.opt});this.$playerWrap=$(t),this.$playerCover=this.$playerWrap.find(".figure-video-cover"),this.$playerStart=this.$playerWrap.find(".figure-video-start"),this.$player=this.$playerWrap.find(".figure-video"),this.player=this.$player.get(0),this.$volume=this.$playerWrap.find(".figure-volume"),this.$dur=this.$playerWrap.find(".figure-dur"),this.$dom.append(this.$playerWrap),this.play(),this.addPlayerListener()},HoverPlayer.prototype.addPlayerListener=function(){var t=this;this.$volume.click(function(e){e.preventDefault(),t.switchVolumn()}),this.$player.on("loadstart",function(){t.$playerCover.addClass("hide"),t.log(t.opt)}).on("canplay",function(){t.$playerStart.addClass("hide"),t.player.muted=HoverPlayer.muted}).on("play",function(){}).on("loadedmetadata",function(){t.player.currentTime=0}).on("waiting",function(){}).on("playing",function(){}).on("pause",function(){}).on("timeupdate",function(){var e=Math.floor(t.player.currentTime),i=Math.floor(t.player.duration||t.duration);t.$dur.text(i-e+" 秒")}).on("durationchange",function(){}).on("error",function(){})},HoverPlayer.prototype.play=function(){var t=this;t.$playerCover.removeClass("hide"),setTimeout(function(){t.player.load(),t.player.play(),HoverPlayer.muted?t.$volume.addClass("muted"):t.$volume.removeClass("muted")},150)},HoverPlayer.prototype.stop=function(){this.$dur.text(this.opt.duration+" 秒"),this.player.pause()},HoverPlayer.prototype.switchVolumn=function(){this.$volume.hasClass("muted")?(this.$volume.removeClass("muted"),this.player.muted=!1,HoverPlayer.muted=!1):(this.$volume.addClass("muted"),this.player.muted=!0,HoverPlayer.muted=!0)},HoverPlayer.prototype.log=function(t){var e=new Image,i="",o={tpl:t.tpl,tn:t.tpl,stp:t.uid,type:t.type,id:t.id,refer:t.link,src:window.encodeURIComponent(t.src)};for(var n in o)o.hasOwnProperty(n)&&(i+="&"+n+"="+o[n]);e.src="http://pc.videoclick.baidu.com/u.gif?pid=104&bl=hoverPlayer"+i},HoverPlayer.muted=!0,module.exports=function(t){initHoverPlayer(t)}});
;define("common:widget/video/liveSubscribe/liveModel.js",function(t,e,r){t("common:static/ui/localStorage/localStorage.js");var n=window.localStorage,a="LIVE_SUBSCRIBE",s="PREVIEW_SUBSCRIBE",i={isPreviewed:function(){var t=n.getItem(s)||"0";return"1"===t},setPreviewed:function(){n.setItem(s,"1")},getBeforeDur1h:function(){return this.operateData(function(t){var e,r,n=window.parseInt(+new Date/1e3);return this.subscribesIterate(t,function(t,a){r?0<a.start-n&&a.start-n<3600&&a.start<r&&!a.noticed&&(r=a.start,e=a):0<a.start-n&&a.start-n<3600&&!a.noticed&&(r=a.start,e=a)}),e})},getSubscribe:function(t,e){return this.operateData(function(r){for(var n=0,a=r.length;a>n;n++){var s=r[n];if(s.type===t&&s.id===e)return s}return!1})},getAllSubscribe:function(){return this.operateData(function(t){return this.subscribesIterate(t,function(t,e){var r=this.dataStatus(e.type,e.id);return!r.status||"beforeGt1h"!==r.status&&"beforeDur1h"!==r.status&&"on"!==r.status?(this.cancelSubscrible(e.type,e.id),null):(e.status=r.status,e)})})},subscribesIterate:function(t,e){for(var r=[],n=0,a=t.length;a>n;n++){var s=e.call(this,n,t[n]);s&&r.push(s)}return r},subscribe:function(t){this.cancelSubscrible(t.type,t.id),this.operateData(function(e){return e.unshift(t),e.length>10&&(e.length=10),!0})},cancelSubscrible:function(t,e){this.operateData(function(r){for(var n=0,a=r.length;a>n;n++){var s=r[n];if(s.type===t&&s.id===e)return r.splice(n,1),!0}return!1})},dataStatus:function(t,e){var r={},n=+new Date,a=window.parseInt(n/1e3),s=this.getSubscribe(t,e);if(s){var i=window.parseInt(s.start),u=window.parseInt(s.end);i-3600>a?r.status="beforeGt1h":a>i-3600&&i>a?r.status="beforeDur1h":a>i&&u>a?r.status="on":a>u&&(r.status="out"),r.isIn=!0,r.dur=i-a,r.start=i,r.end=u}else r.isIn=!1;return r},operateData:function(t){var e=n.getItem(a)||"",r=e?JSON.parse(e):[],s=t.call(this,r);return s===!0&&n.setItem(a,JSON.stringify(r)),s},dealTime:function(t){var e=new Date(1e3*t),r=e.getMonth()+1,n=e.getDate(),a=e.getHours(),s=e.getMinutes();return r+"月"+n+"日"+a+"时"+s+"分"},dealTimeCountDown:function(t){var e=window.parseInt(t/3600),r=window.parseInt((t-3600*e)/60),n=window.parseInt(t-3600*e-60*r),a=r+"分"+n+"秒",s=e?e+"时"+a:a;return s},isSpringFestivalDur:function(){var t=+new Date,e="2017-02-11 00:00:00",r="2017-02-12 23:59:59",n=function(t){var e=t.split(" "),r=e[0].split("-"),n=e[1].split(":");return new Date(r[0],r[1]-1,r[2],n[0],n[1],n[2])},a=n(e),s=n(r),i=+a,u=+s;return u>t&&t>i?!0:!1}};r.exports=i});
;define("common:widget/video/liveSubTips/liveSubTips.js",function(i,e,t){function s(i){return this.$dom=$(i),this.$title=this.$dom.find(".str-live-tip"),this.$liveImage=this.$dom.find("#liveImage"),this.$aSubLiveTips=this.$dom.find("#aSubLiveTips"),this.$liveTipsDel=this.$dom.find(".icon-liveTips-del"),n.isSpringFestivalDur()?void this.$dom.hide():void this.init()}var n=i("common:widget/video/liveSubscribe/liveModel.js");s.prototype.init=function(){var i=this.pgm=n.getBeforeDur1h(),e=location.pathname.split(/\//)[2];if(e||(e=location.pathname.split(/\//)[1]),i){if(window.pageId&&"page-video-index-live"===window.pageId&&e&&e===i.channel)return;this.$title.html("《"+i.title+"》"),this.$liveImage.attr("src",i.imgUrl),this.$aSubLiveTips.attr("href","/live/"+i.channel+"?id="+i.id),this.$aSubLiveTips.attr("static","bl=subLiveTips&sp="+i.type+"&id="+i.id),this.addEvent(),this.$dom.removeClass("hide")}},s.prototype.addEvent=function(){var i=this;this.$liveTipsDel.on("click",function(){i.pgm.noticed=!0,n.subscribe(i.pgm),i.$dom.remove()})},t.exports=function(i){new s(i)}});
;define("common:widget/video/liveSubscribe/liveSubscribe.js",function(t,s,e){function i(t,s){this.pageTn=s,this.$dom=$(t),this.$tarDom=this.$dom.find(".d-live-status"),this.$aSubLiveDom=this.$dom.find("#aSubLive"),a.isSpringFestivalDur()||(this.init(),this.addEvent())}var a=t("common:widget/video/liveSubscribe/liveModel.js");i.prototype.init=function(){var t=this.$tarDom,s=t.find("#liveSub"),e=this.$dom.find("#liveSubinfo"),i=this.$dom.find("#liveTip"),o=t.data("id"),n=t.data("type"),d=a.dataStatus(n,o),l=this.checkIsNotInData();if("beforeGt1h"===d.status)s.html("取消预约"),i.html('<time class="tm-live-sub">'+a.dealTime(d.start)+"</time>同步直播");else if("beforeDur1h"===d.status||"beforeDur1h"===l.status){var u=d.dur||l.dur,r=d.start||l.start,m=$('<time class="tm-live-sub">'+a.dealTimeCountDown(u)+"</time>");s.html(m),i.html("直播倒计时"),this.downCount(u,r,m)}else if("on"===d.status||"on"===l.status){if(s.html('观看直播<strong class="str-esp"></strong>'),i.html(""),this.pageTn&&"tvplaydetail"===this.pageTn&&e.length){var v=t.data("ext").live,h=window.parseInt(v.epi);h?(this.$dom.addClass("showLiveSubinfo"),e.html('第<span class="strong-font">'+h+"</span>集 正在直播中")):(this.$dom.addClass("showLiveSubinfo"),e.html("正在直播中"))}}else"out"===d.status||"out"===l.status?this.$dom.hide():i.html('<time class="tm-live-sub">'+a.dealTime(l.start)+"</time>同步直播");"out"===d.status&&a.cancelSubscrible(n,o),d.status&&"out"!==d.status?this.$dom.addClass("live-subed live-"+d.status):l.status&&this.$dom.addClass("live-unsub live-"+l.status),this.$dom.removeClass("hide");var b=this.$aSubLiveDom.attr("static"),c=t.data("ext").live.id;b=b+"&u="+encodeURIComponent("/live/"+c+"?id="+o),d.isIn?this.$aSubLiveDom.attr("static",b+"&isIn=true&status="+d.status):this.$aSubLiveDom.attr("static",b+"&isIn=false&status="+l.status),this.log(d,l,o,n)},i.prototype.addEvent=function(){var t=this;this.$tarDom.on("click",function(){var s=$(this),e=s.data("title"),i=s.data("imgurl"),o=s.data("id"),n=s.data("type"),d=s.data("ext").live,l=d.st,u=d.et,r=d.id,m={type:n,id:o,start:l,end:u,channel:r,title:e,imgUrl:i};return t.$dom.hasClass("live-on")||t.$dom.hasClass("live-beforeDur1h")?void(r&&t.$aSubLiveDom.attr("href","/live/"+r+"?id="+o)):void(t.$dom.hasClass("live-subed")?(t.$dom.removeClass("live-subed").addClass("live-unsub").find("#liveSub").html("预约直播"),a.cancelSubscrible(n,o)):(t.$dom.removeClass("live-unsub").addClass("live-subed").find("#liveSub").html("取消预约"),a.subscribe(m)))})},i.prototype.downCount=function(t,s,e){var i=+new Date,o=i,n="",d=this,l=function(){setTimeout(function(){i=+new Date,t-=1,n=a.dealTimeCountDown(t),e.text(n),o=+new Date,1e3*s>o?l():(d.$dom.removeClass("live-beforeDur1h").addClass("live-on").find("#liveSub").html('正在直播<strong class="str-esp"></strong>'),d.$dom.find("#liveTip").html(""))},1e3-(o-i))};l()},i.prototype.checkIsNotInData=function(){var t=this.$tarDom,s=t.data("ext").live,e=window.parseInt(+new Date/1e3),i={},a=window.parseInt(s.st),o=window.parseInt(s.et);return a-3600>e?i.status="beforeGt1h":e>a-3600&&a>e?i.status="beforeDur1h":e>a&&o>e?i.status="on":e>o&&(i.status="out"),i.dur=a-e,i.start=a,i.end=o,i},i.prototype.log=function(t,s,e,i){var a="bl=LiveSubscrible&id="+e+"&type="+i+"&";a+=t.isIn?"isIn=true&status="+t.status:"isIn=false&status="+s.status;var o="http://pc.videoclick.baidu.com/p.gif?pid=104&tn="+this.pageTn+"&tpl="+this.pageTn+"&"+a+"&_="+ +new Date,n=new Image;n.src=o},e.exports=function(t,s){new i(t,s)}});
;define("common:widget/video/loginAdv/loginAdv.js",function(require,exports,module){function MisOutputAd(){}var $=require("common:static/vendor/jquery/jquery.js"),_=require("common:static/vendor/underscore/underscore.js"),ready=!1,loading=!1,dataCollection={};MisOutputAd.prototype.init=function(_){if(!ready&&!loading){var t=this;t.getData(_)}},MisOutputAd.prototype.getData=function(t){var o=t.adName,e=this,a={url:"http://v.baidu.com/videoapi?page_name=ad_user&block_sign=list_ad_user_common&format=json",dataType:"jsonp",success:function(a){a&&a.length>0&&a[0].data&&a[0].data.videos&&a[0].data.videos.length>0&&(_.each(a[0].data.videos,function(_){dataCollection[_.sub_title]=_}),dataCollection[o]&&e.render(t,dataCollection[o]))}};$.ajax(a)},MisOutputAd.prototype.collection={ad_user_common_index_right_float:{id:"ad_user_common_index_right_float",html:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+="",__p+='\n<div class="ad_user_common_index_AD_right_close">\n	<a title="右侧悬浮广告" class="close" href="javascript:void(0)"></a>\n</div>\n<div class="ad_user_common_adContainer">\n\n\n\n<div id="ad_user_common_adRightFloat" \n    class="ad_user_common_index_AD_right_fixed \n    ',item.title&&(__p+=" ad_user_common_has_title "),__p+=" ad_user_common_AD_close_status\n	",1==item.intro&&(__p+=" ad_user_common_index_AD_right_fixed_big"),__p+=' ">\n	<a class="normal" target="_blank" href="'+(null==(__t=item.url)?"":__t)+'" static="bl=ad_user_common_index_AD_right_fixed&stp=adv_right_90">\n		<img  src="'+(null==(__t=item.imgh_url||item.imgv_url)?"":__t)+'" />',1!=item.intro&&(__p+=""+(null==(__t=item.title)?"":__t)),__p+='\n	</a>\n	<a title="'+(null==(__t=item.title)?"":__t)+'" class="close" href="javascript:void(0)"></a>\n</div>\n\n</div>\n';return __p},filter:function(){return document.referrer&&/www\.baidu\.com/.test(document.referrer)||/frp=bdbrand/.test(location.href)?!1:!0},action:function(){var t=$(".ad_user_common_index_AD_right_fixed"),o={bdv_adRightFloat:"#ad_user_common_adRightFloat",bdv_adRightFloat1:"#ad_user_common_adRightFloat1",bdv_adRightFloat2:"#ad_user_common_adRightFloat2",bdv_adRightFloat3:"#ad_user_common_adRightFloat3",bdv_right_ad_poster:"#ad_user_common_adRightFloatBig"};if(_.each(o,function(_,t){$.cookie.get(t)||$(_).removeClass("ad_user_common_AD_close_status")}),t&&t.length&&$(".ad_user_common_index_AD_right_fixed.ad_user_common_AD_close_status").length&&$(".ad_user_common_index_AD_right_close").show(),!$("#ad_user_common_adRightFloatBig").hasClass("ad_user_common_AD_close_status")){var e=5;$("#ad_user_common_adRightFloatBig").append($("<span class='time-num'><b>5</b>秒后自动关闭</span>"));var a=$(".time-num b"),i=setInterval(function(){0>=e?($("#ad_user_common_adRightFloatBig").addClass("ad_user_common_AD_close_status"),a.parent().remove(),$.cookie.set("bdv_right_ad_poster","1",{expires:864e4,path:"/"}),clearInterval(i)):a.html(e--)},1e3)}$(".ad_user_common_index_AD_right_fixed .close").on("click",function(){var _=$(this).parent(),t=_.attr("id");$(".ad_user_common_index_AD_right_close").show(),_.hasClass("ad_user_common_AD_close_status")?(_.removeClass("ad_user_common_AD_close_status"),$(".index-right-float-big").removeClass("ad_user_common_AD_close_status")):(_.addClass("ad_user_common_AD_close_status"),$(".index-right-float-big").addClass("ad_user_common_AD_close_status")),$.cookie.set("bdv_"+t,"1",{expires:864e4,path:"/"})}),$(".ad_user_common_index_AD_right_close").on("click",function(){_.each(o,function(_,t){$.cookie.remove(t)}),$(this).hide().parent().find(".ad_user_common_index_AD_right_fixed").removeClass("ad_user_common_AD_close_status")}),$(".ad_user_common_adContainer").on("mouseover",function(){$("#ad_user_common_adRightFloatBig").removeClass("ad_user_common_AD_close_status")}),$(".ad_user_common_adContainer").on("mouseleave",function(){$("#ad_user_common_adRightFloatBig").addClass("ad_user_common_AD_close_status")})}},ad_user_common_index_linebox_hotinfotoday:{id:"ad_user_common_index_linebox_hotinfotoday",html:function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+="",__p+='\n<a class="ad_user_common_adLinebox_left" target="_blank" href="'+(null==(__t=item.url)?"":__t)+'">\n    <img  src="'+(null==(__t=item.imgh_url||item.imgv_url)?"":__t)+'" />\n</a>\n';return __p},filter:function(){return!0},action:function(){$("body").addClass("adv_user_common")}}},MisOutputAd.prototype.render=function(_,t){var o=_.adId,e=this,a=e.collection[o].filter&&e.collection[o].filter();if(a){var i=e.collection[o].html({item:t});$("#"+e.collection[o].id).html(i),e.collection[o].action(_)}};var misAD=new MisOutputAd;exports.push=function(_){misAD.render(_,_.data)},exports.init=function(_){misAD.init(_)}});
;define("common:widget/video/nav/nav.js",function(require,exports,module){function userInfoInit(){var e=T("#nav .btn_more"),n=T("#nav .box_more_items");e[0]&&n[0]&&(e.on("mouseenter",function(){var e=$(this);e.find(".box_more_items").show(),e.addClass("btn_more_hover")}),e.on("mouseleave",function(){var e=$(this);e.find(".box_more_items").hide(),e.removeClass("btn_more_hover")}))}var videoapi=require("common:static/ui/videoapi/videoapi.js"),tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";for(var i=0,len=menu.length;len>i;i++){var item=menu[i];__p+="\n	";var itemLength=ismore?"item_"+item.title.length+"_byte":"";__p+='\n	<li  class="'+(null==(__t=itemLength)?"":__t)+" ",pageTn&&item.s_intro==pageTn&&(__p+=" current"),__p+='" >\n		<a href="'+(null==(__t=item.url)?"":__t)+'"',1==item.update&&(__p+=' target="_blank"'),__p+=">"+(null==(__t=item.title)?"":__t),item.hot_day>0&&(__p+='\n		<img src="'+(null==(__t=item.imgh_url)?"":__t)+'" style="bottom:'+(null==(__t=item.duration||30)?"":__t)+"px;left:"+(null==(__t=item.rating||3)?"":__t)+'px">\n		'),__p+="</a>\n	</li>\n"}__p+="\n"}return __p},T=$;exports=module.exports=function(e,n,t){userInfoInit();var i=window.location.href.indexOf("ip=");if(i>-1){({ip:window.location.href.substring(i+3)})}else;"0"===n&&videoapi({navcommon:"list:common_nav_right,common_nav_left"},function(n){for(var i,o,_={commonnavleft:"#nav .menu-main",commonnavright:"#nav .menu-sub"},a=0,m=n.length;m>a;a++)if(i=n[a],o=i.name.replace(/_/g,""),_[o]&&i.data&&i.data.videos){var r;"commonnavleft"===o?(r=$("html").hasClass("w1024")&&$(".nav-inner").width()<1080?5:7,("北京"===t||"广东"===t||"上海"===t)&&(r+=1)):r=5;var l=i.data.videos.splice(0,r);$(_[o]).find(".btn_more").before(tpl({pageTn:e,menu:l,ismore:!1})),0===i.data.videos.length&&$(_[o]).find(".btn_more").hide(),$(_[o]).find(".box_more_items").append(tpl({pageTn:e,menu:i.data.videos,ismore:!0}))}})}});
;define("common:widget/video/navGuider/navGuider.js",function(require,exports,module){function userInfoInit(){var t=T("#btn_more"),e=T("#box_more"),o=null;t[0]&&e[0]&&(t.on("mouseenter",function(){clearTimeout(o),e.show(),T("#btn_more").addClass("btn_more_hover").find(".img-more").attr("src","http://video-static.xdcdn.xiaodutv.com/browse_static/v3/common/widget/video/navGuider/more-active_ac2311ad.png")}),t.on("mouseleave",function(){o=setTimeout(function(){e.hide(),T("#btn_more").removeClass("btn_more_hover").find(".img-more").attr("src","http://video-static.xdcdn.xiaodutv.com/browse_static/v3/common/widget/video/navGuider/more_36bf05b3.png")},200)}),e.on("mouseenter",function(){clearTimeout(o)}),e.on("mouseleave",function(){o=setTimeout(function(){e.hide(),T("#btn_more").removeClass("btn_more_hover").find(".img-more").attr("src","http://video-static.xdcdn.xiaodutv.com/browse_static/v3/common/widget/video/navGuider/more_36bf05b3.png")},200)}))}var videoapi=require("common:static/ui/videoapi/videoapi.js"),T=$,navTmpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="\n";for(var i=0,len=data.length;len>i;i++){__p+="\n	";var item=data[i];__p+='\n	<li class="item_'+(null==(__t=item.title.length)?"":__t)+'_byte">\n        <a href="'+(null==(__t=item.url)?"":__t)+'">\n            <span>'+(null==(__t=item.title)?"":__t)+"</span>\n        </a>\n    </li>\n"}__p+=""}return __p};userInfoInit(),$(function(){videoapi({navcommon:"list:common_nav_right,common_nav_left"},function(t){var e=t&&t[0]&&t[0].data&&t[0].data.videos,o=t&&t[1]&&t[1].data&&t[1].data.videos;e.push.apply(e,o);var n=navTmpl({data:e});$("#box_more").html(n)})})});
;define("common:widget/video/navmini/navmini.js",function(n,i,e){i=e.exports=function(){var n=!1;$("#navmini").mouseenter(function(){n||($("#navmini .bd ul").append($('#nav li:not(".btn_more")').clone()),n=!0),$(this).addClass("show")}).mouseleave(function(){$(this).removeClass("show")})}});
;define('common:widget/video/newsearchbox/searchbox.js', function(require, exports, module){ /**
 * @file 搜索框相关逻辑
 * @author video-fe@baidu.com
 */

var videoapi = require('common:static/ui/videoapi/videoapi.js');

var pageTn = '';

// 统计逻辑
// @param {string} id 表单id
function statistics(options) {
    // 添加百度一下点击统计
    if (!options.openQuickSearch) {
        $('#' + options.id + 'Btn').click(function (e) {
            if ($('#header').hasClass('hdmini')) {
                $.log('http://pc.videoclick.baidu.com/v.gif?pid=104&searchpage='
                    + pageTn + '&s=zdjs&eventtype=click&newheader=1&wd='
                    + encodeURIComponent($('#' + options.id + 'Input').val()));
            }
            else {
                $.log('http://pc.videoclick.baidu.com/v.gif?pid=104&searchpage='
                    + pageTn + '&s=zdjs&eventtype=click&wd='
                    + encodeURIComponent($('#' + options.id + 'Input').val()));
            }
        });
    }
    else {
        $('#' + options.id + 'Btn').click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if ($('#header').hasClass('hdmini')) {
                $.log('http://pc.videoclick.baidu.com/v.gif?pid=104&searchpage='
                    + pageTn + '&s=zdjs&eventtype=click&newheader=1&wd='
                    + encodeURIComponent($('#' + options.id + 'Input').val()));
            }
            else {
                $.log('http://pc.videoclick.baidu.com/v.gif?pid=104&searchpage='
                    + pageTn + '&s=zdjs&eventtype=click&wd='
                    + encodeURIComponent($('#' + options.id + 'Input').val()));
            }
            setTimeout(function () {
                $('#' + options.id).submit();
            }, 200);
        });
    }
}

function bindFocusEvent() {
    var ev = $('#new-bdvSearchInput');
    var pnode = $('.bdv-search-inputs');
    ev.on('focus', function () {
        pnode.addClass('focus-searchbox');
    }).on('blur', function () {
        pnode.removeClass('focus-searchbox');
    }).on('mouseover', function () {
        pnode.addClass('hover-searchbox');
    }).on('mouseout', function () {
        pnode.removeClass('hover-searchbox');
    });
}
function getIndexData(cb) {
    var self = this;
    $.ajax({
        url: 'http://v.baidu.com/?df&pagelets[]=pager1&force_mode=1&format=json',
        dataType: 'jsonp',
        success: function (ret) {
            if (ret && ret.data && (ret.data.index_hot_focus_view_1 || ret.data.index_hot_focus_view_2 || ret.data.index_hot_focus_view_3 || ret.data.index_hot_focus_view_4)) {
                var arr = [];
                if (ret.data.index_hot_focus_view_1 && ret.data.index_hot_focus_view_1.videos) {
                    arr = arr.concat(ret.data.index_hot_focus_view_1.videos.slice(0, 5));
                }
                if (ret.data.index_hot_focus_view_2 && ret.data.index_hot_focus_view_2.videos) {
                    arr = arr.concat(ret.data.index_hot_focus_view_2.videos.slice(0, 5));
                }
                if (ret.data.index_hot_focus_view_3 && ret.data.index_hot_focus_view_3.videos) {
                    if (arr.length < 10) {
                        arr = arr.concat(ret.data.index_hot_focus_view_3.videos.slice(0, 5));
                    }
                }
                if (ret.data.index_hot_focus_view_4 && ret.data.index_hot_focus_view_4.videos) {
                    if (arr.length < 10) {
                        arr = arr.concat(ret.data.index_hot_focus_view_4.videos.slice(0, 5));
                    }
                }
                cb && cb.call(self, arr);
            }
            
        }
    });
}
// Class: 预置query逻辑
function PreKey(options) {
    this.pageTn = options.pageTn;
    this.$input = $('#' + options.id + 'Input');
    if (options.hotSearchWordsBox) {
        var hotSearchWordsArr = [];
        $.each(options.hotSearchWordsBox, function (index, item) {
            if ((hotSearchWordsArr.length === 10) || !item.videos) {
                return;
            }
            hotSearchWordsArr = hotSearchWordsArr.concat(item.videos.slice(0, 5));
        });
        if (hotSearchWordsArr.length && hotSearchWordsArr[0].title) {
            this.pollingFillQuery(hotSearchWordsArr);
        }
        else if (options.pageTn && options.pageTn === 'indsa'){
            var self = this;
            setTimeout(() => {
                getIndexData.call(self, self.pollingFillQuery);
            }, 1000 * 20);
        }
    }
    if (options.ismis) {
        this.bind();
    }
    else {
        if (PreKey.query) {
            this.fillQuery();
        }
        else {
            PreKey.instances.push(this);
            PreKey.request();
        }
    }
}

PreKey.prototype = {
    // 填充query
    fillQuery: function () {
        this.$input.attr('data-prekey', PreKey.query).addClass('place-holder').val(PreKey.query);
        this.bind();
    },

    // 绑定事件
    bind: function () {
        var $input = this.$input;
        var query = $input.attr('data-prekey');
        if (query) {
            $input.focus(function () {
                if ($input.val() === query) {
                    $input.val('').removeClass('place-holder');
                }
            }).blur(function () {
                if (!$input.val()) {
                    $input.addClass('place-holder').val(query);
                }
            });
        }
    },

    // 轮询
    pollingFillQuery: function (arr) {
        if (!arr || !arr.length) {
            return;
        }
        var i = 0;
        var $input = this.$input;
        setInterval(() => {
            if (i > 9) {
                i = 0;
            }
            arr[i].title && ($input.attr('data-prekey', arr[i].title.split('[已更新]')[0]).addClass('place-holder').val(arr[i].title.split('[已更新]')[0]));
            i++;
            
        }, 1000 * 30);
    }
};

// 实例回调函数，用于接收数据
PreKey.instances = [];

// 请求数据预置query数据
PreKey.request = function () {
    if (!this.loading) {
        this.loading = true;
        videoapi({
            navcommon: 'list:common_search_prekeyword'
        }, function (result) {
            if (result && result[0] && result[0].data && result[0].data.videos) {
                $.each(result[0].data.videos, function (index, item) {
                    if ($.trim(item.s_intro) === pageTn) {
                        PreKey.query = item.title;
                        return false;
                    }
                });
            }
            if (PreKey.query) {
                $.each(PreKey.instances, function (index, item) {
                    item.fillQuery();
                });
            }
        });
    }
};

exports = module.exports = function (options) {
    pageTn = options.pageTn;

    if (options && options.preFlag) {
        // 创建一个预置query实例
        var prekey = new PreKey(options);
    }
    bindFocusEvent();
    // 添加统计
    statistics(options);
};
 
});
;define("common:widget/video/newtabsearch/tabsearch.js",function(t,a,e){a=e.exports=function(){var t={news:"https://www.baidu.com/s?rtt=1&bsst=1&cl=2&tn=news&word={{query}}&fr=video",ps:"http://www.baidu.com/s?cl=3&wd={{query}}&ie=utf-8",tieba:"http://tieba.baidu.com/f?kw={{query}}&t=1&ie=utf-8",zhidao:"http://zhidao.baidu.com/q?ct=17&pn=0&tn=ikaslist&rn=10&word={{query}}&ie=utf-8",music:"http://music.baidu.com/search?fr=video&key={{query}}&ie=utf-8",image:"http://image.baidu.com/search/index?tn=baiduimage&ct=201326592&cl=2&lm=-1&pv=&word={{query}}&z=0&ie=utf-8",map:"http://map.baidu.com/m?word={{query}}&fr=map004&ie=utf-8",wenku:"http://wenku.baidu.com/search?word={{query}}&lm=0&od=0&ie=utf-8",baike:"http://baike.baidu.com/search/word?word={{query}}&pic=1&sug=1"},a=$("#new-bdvSearchInput");a.length&&$("#new-tabsearch .tabs").delegate("a[data-product]","click",function(){var e,i=a.val();i&&i!==a.attr("data-prekey")&&(e=t[this.getAttribute("data-product")],e&&(this.href=e.replace("{{query}}",i)))});var e=$("#new-tabsearch .tabs a[data-product=ps]");/chrome|firefox|safari|msie 10|rsv:11|msie [89]/i.test(navigator.userAgent)&&(e.prop("href","https://www.baidu.com/"),t.ps="https://www.baidu.com/s?cl=3&wd={{query}}&ie=utf-8",e.one("mouseover",function(){window.BaiduHttps=window.BaiduHttps||{},window.BaiduHttps.callbacks||(window.BaiduHttps.callbacks=function(){}),$.ajax({url:"https://www.baidu.com/con?from=vbaidu&callback=?",dataType:"jsonp",jsonpCallback:"BaiduHttps.callbacks"})}))}});
;define("common:widget/video/newuserbar/userbar.js",function(require,exports,module){function setRefere(){var e={tvplay:!0,movie:!0,tamasha:!0,cartoon:!0,indsa:!0,cooperate:!0},o=pageTn&&e[pageTn]&&pageTn;if(urlfr)o&&$.cookie.set("bdvref",urlfr+"_"+o,{domain:location.hostname,path:"/"});else if(!$.cookie.get("bdvref")){var n=document.referrer;if(n){var i=document.createElement("a");i.href=n,n=i.hostname.match(/^(v|www)\.(baidu|hao123)\.com$/)?i.hostname:""}n&&o&&"indsa"!==o&&$.cookie.set("bdvref",n+"_"+o,{domain:location.hostname,path:"/"})}}function initUserBar(userinfo){var isBDPlayer=navigator.userAgent.indexOf("BIDUPlayer")>-1;if(isBDPlayer&&window.external&&window.external.bpls_get_login_info)try{var yyUserInfo=eval("("+window.external.bpls_get_login_info()+")");!yyUserInfo.LoginState&&userinfo&&userinfo.value&&(location.href="http://"+userinfo.host+"/passport/index?page=logout&outBd=1&forward="+encodeURIComponent(location.href))}catch(ex){}$(function(){function userInfoInit(){var e=$("#new-userbar .uname"),o=$("#new-userbar .logout");e.length&&(e.off("mouseenter.new-userbar").on("mouseenter.new-userbar",function(){$(this).addClass("uname-hover")}).off("mouseleave.new-userbar").on("mouseleave.new-userbar",function(){$(this).removeClass("uname-hover")}),!location.hostname.match(/\.baidu\.com$/)&&o&&(o.click(function(e){e.preventDefault();var o=document.createElement("iframe");o.src="http://v.baidu.com/dev_proxy_logout.html?frp="+location.hostname,o.style.display="none",document.body.appendChild(o)}),window.video_logout_callback=function(){location.reload()}))}function renderLogin(){var url=encodeURIComponent(document.location.href),tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<ul class="no-login">\n	<li class="line"></li>\n	<li class="channelindex">\n		<a href="http://www.baidu.com">百度首页</a>\n	</li>\n    <li class="login">\n    	<a href="http://passport.baidu.com/v2/?login&tpl=vd&u='+(null==(__t=url)?"":__t)+'" target="_blank" id="loginbtn" class="link-login">登录</a>\n    	<a href="http://v.baidu.com/passport/index?page=combo&pagetype=register&head=1&forward='+(null==(__t=url)?"":__t)+'" target="_blank" class="link-reg">注册</a>\n    </li>\n    <li class="link">\n    	<a href="http://list.video.baidu.com/iph_promote.html" target="_blank"> APP下载</a>\n    </li>\n</ul>';return __p};$("#new-userbar").append(tpl({url:url})),location.hostname.match(/baidu\.com$/)&&$("#loginbtn").off("click.new-userbar").on("click.new-userbar",function(e){e.preventDefault(),bdPassPop.show()})}function renderLogged(userinfo){var tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<ul class="logged">\n    <li class="line"></li>\n    <li class="channelindex">\n        <a href="http://www.baidu.com">百度首页</a>\n    </li>\n    <li class="uname">\n        <a class="link-name" href="'+(null==(__t=userinfo.mysite)?"":__t)+'" target="_blank" id="username"><span id="user_name">'+(null==(__t=userinfo.value)?"":_.escape(__t)),userinfo.user_source&&0!=userinfo.user_source&&1==userinfo.incomplete_user&&0==userinfo.has_uname&&(__p+=' <img src="//passport.bdimg.com/passApi/img/icon_'+(null==(__t=userinfo.user_source)?"":__t)+'_16.png" class="show_icons" id="show_icons" />'),__p+='</span>\n    </a>\n    <div class="tip">\n        <div class="triangle"></div>\n        <ul>\n            <li class="first"><a href="'+(null==(__t=userinfo.mysite)?"":__t)+'" target="_blank" class="my-info">个人中心</a></li>\n            <li><a href="https://'+(null==(__t=userinfo.host)?"":__t)+'/passport/usercenter?&head=1" target="_blank" class="my-info">账号设置</a></li>\n            ',isBDPlayer||(__p+='\n            <li><a href="'+(null==(__t=userinfo.logoutUrl)?"":__t)+'" class="logout">退出</a></li>\n            '),__p+='\n        </ul>\n    </div>\n    </li>\n    <li class="link"><a href="http://list.video.baidu.com/iph_promote.html" target="_blank"> APP下载</a></li>\n</ul>\n';return __p};0===+userinfo.incomplete_user&&0===+userinfo.has_uname?(userinfo.value=userinfo.emailphone,userinfo.mysite="http://v.baidu.com/i?from=passport"):userinfo.mysite=1===+userinfo.incomplete_user&&0===+userinfo.has_uname?"http://v.baidu.com/i?from=passport":"http://v.baidu.com/i?from=passport",userinfo.logoutUrl="http://"+userinfo.host+"/passport/index?page=logout&outBd=1&forward="+encodeURIComponent(document.location.href),$("#new-userbar").html(tpl({userinfo:userinfo,isBDPlayer:isBDPlayer})).addClass(userinfo&&userinfo.vipinfo&&userinfo.vipinfo.isvalid?"vip-super":"vip"),userInfoInit()}userinfo&&userinfo.value?renderLogged(userinfo):renderLogin()})}function globalStatistics(e){var o=location.hostname.match(/(?:\.baidu\.com$)|(?:\.hao123\.com$)/)?$.cookie.get("bdvref"):e.cookie&&e.cookie.bdvref,n=$.cookie.get("bdvshare"),i="http://pc.videoclick.baidu.com/v.gif?pid=104&tn="+pageTn+(o?"&VIDEO_FR="+encodeURIComponent(o)+(n?"__"+n:""):""),t=location.href.match(/baidu\.com\/v\?.*word=([^&]*)/);t?i+="&wd="+t[1]:(t=location.href.match(/baidu\.com\/(tv|comic|show)\/(\d*)\.htm/))&&(i+="&id="+t[2]+"&ty="+t[1]),i+=isLogin?"&login=true&uname="+encodeURIComponent(e.value)+"&utype="+utype:"&login=false",urlfr&&(i+="&fr="+urlfr),$.log(i)}var loginCheck=require("common:static/ui/loginCheck/loginCheck.js"),bdPassPop=require("common:static/ui/bdPassPop/bdPassPop.js"),ec=require("common:static/ui/eventcenter/eventcenter.js"),_=require("common:static/vendor/underscore/underscore.js"),isLogin=!1,utype="normal",pageTn="",urlfr=$.url.getQueryValue(location.href,"fr");exports=module.exports=function(e,o){pageTn=e,loginCheck(function(e){e&&e.value&&(isLogin=!0,e.vipinfo&&e.vipinfo.isvalid&&e.vipinfo.isvip&&(utype="vip"),$(document.body).addClass("global-logged")),!o&&initUserBar(e),setRefere(),globalStatistics(e)})},ec.attach("userbar.refresh",function(){exports(pageTn)})});
;define("common:widget/video/push/expandPush.js",function(require,exports,module){var expandPush=(require("common:static/vendor/underscore/underscore.js"),{init:function(t){this.data=t.data,this.cookieName="gameHistory",this.el=$('<div id="'+t.el+'"></div>'),$("body").append(this.el),this.render()},render:function(){var html=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";var page=encodeURIComponent(window.location.href);__p+='\n<div class="video-push-inner" static="bl=pushGame&o='+(null==(__t=page)?"":__t)+'&ext=">\n	<div class="video-push-title">\n        <span class="video-push-game-icon"></span>\n		<span class="caption">'+(null==(__t=caption)?"":__t)+'</span>\n        <span class="video-push-setting-btn">\n            <div class="video-push-setting-box">\n                <div class="video-push-setting-wrap">\n                    <div class="video-push-setting-triangle"></div>\n                    <ul class="video-push-setting-list">\n                        <li class="video-push-setting-item first close-push"><a href="javascript:void(0);" static="stp=close">关闭我的游戏</a></li>\n                        <li class="video-push-setting-item ban-push"><a href="javascript:void(0);" static="stp=ban">不再展示</a></li>\n                    </ul>\n                </div>\n            </div>\n        </span>\n		<span class="push-close-btn"><a href="javascript:void(0);" static="stp=expand"></a></span>\n	</div>\n    <!-- <div class="video-push-setting-bg"></div> -->\n	<div class="video-push-body">\n		<div class="video-push-wrap">\n            <div class="push-base-user-info">\n                <div class="push-user-name">\n                    <p>您好：</p>\n                    <p><a class="push-user-name-show" href="http://youxi.v.baidu.com/user/" target="_blank" title="'+(null==(__t=userInfo.username)?"":__t)+'" static="stp=username">'+(null==(__t=userInfo.username)?"":__t)+'</a></p>\n                </div>\n                <a class="game-push-gold-btn" href="http://youxi.v.baidu.com/?scrollTo=cardGame" target="_blank" static="stp=gift">领取礼包</a>\n            </div>\n            <div class="game-push-history-wrap">\n                <ul class="game-push-history-list">\n                    ';for(var i=0,len=Math.min(history.length,3);len>i;i++){var item=history[i];__p+='\n                        <li class="game-push-history-item">\n                            ';var targetUrl="http://youxi.v.baidu.com/game_frame/play.php?gid="+item.gid+"&sid="+item.servers.sid+"&frm=bdsp-wdyx&referer=bdsp";__p+='\n                            <a href="http://youxi.v.baidu.com/action/login_redirect.php?u='+(null==(__t=window.encodeURIComponent(targetUrl))?"":__t)+'" target="_blank"  static="stp=gameEntry&ext='+(null==(__t=i)?"":__t)+'">\n                            <img class="game-icon" src="http://image.youxi.v.baidu.com/www/images/game/'+(null==(__t=item.game_alias)?"":__t)+'/16_16.jpg" alt=""><span class="game-name">'+(null==(__t=item.game_name)?"":__t)+'</span> &nbsp;&nbsp;<span class="game-server">'+(null==(__t=item.servers.server_name)?"":__t)+'</span>\n                            <span class="game-entry-btn"  target="_blank">进入</span>\n                            </a>\n                        </li>\n                    '}__p+='\n                </ul>\n\n            </div>\n		</div>\n        <div class="video-push-footer">\n            <a href="'+(null==(__t=more.url)?"":__t)+'" static="stp=more" target="_blank">\n                '+(null==(__t=more.title)?"":__t)+" >>\n            </a>\n        </div>\n	</div>\n\n</div>\n"}return __p},config={caption:"我的游戏",userInfo:{username:this.data.uname},history:this.data.history,more:{title:"更多游戏",url:"http://youxi.v.baidu.com"}};this.el.html(html(config)),this.bindEvent()},bindEvent:function(){var t=this,i=$("#pushGameBox"),n=this.el.find(".video-push-body"),e=this.el.find(".push-close-btn"),s=this.el.find(".video-push-setting-btn"),a=this.el.find(".video-push-setting-box"),o=this.el.find(".ban-push"),l=this.el.find(".close-push"),d=n.height();l.on("click",function(){i.animate({height:0},500,function(){i.remove();var n=new Date,e=""+n.getFullYear()+(n.getMonth()+1)+n.getDate();$.cookie.set(t.cookieName,e,{domain:window.location.hostname,path:"/"})})}),o.on("click",function(){i.animate({height:0},500,function(){i.remove();new Date;$.cookie.set(t.cookieName,"forever____"+t.data.gameStamp,{domain:window.location.hostname,path:"/"})})}),e.data("flag","1"),e.on("click",function(){"1"===$(this).data("flag")?(n.animate({height:"0"},400),s.css("display","none"),"1"===s.data("flag")&&s.trigger("click"),$(this).data("flag","0").addClass("close")):(n.animate({height:d},400),s.css("display","block"),$(this).data("flag","1").removeClass("close"))}),s.hover(function(){a.css("display","block"),window.clearTimeout(window.popSetting),window.popSetting=null},function(){window.popSetting=window.setTimeout(function(){a.css("display","none"),window.clearTimeout(window.popSetting),window.popSetting=null},300)}),i.hover(function(){$.log("http://pc.videoclick.baidu.com/v.gif?pid=104&u="+encodeURIComponent(window.location.href)+"&bl=pushGame&ext=hover")},function(){}),$.log("http://pc.videoclick.baidu.com/u.gif?pid=104&u="+encodeURIComponent(window.location.href)+"&bl=pushGame&ext=init")}});module.exports=function(t){expandPush.init(t)}});
;define("common:widget/video/push/push.js",function(require,exports,module){var push={init:function(t,i){var n=this.formatData(t);this.callback=i,this.render(n)},formatData:function(t){var i={config:{},data:[]};return $.each(t,function(t,n){"config"===n.title?i.config={caption:n.sub_title||"热门新闻",more_txt:n.intro||"更多",more_url:n.url||"http://v.baidu.com",cookieid:n.update||0,duration:n.id||0}:i.data.push(n)}),i},render:function(data){var self=this;self.pushBox=$('<div id="video_push_box" style="display:none;"></div>');var html=(require("common:static/vendor/underscore/underscore.js"),function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+="";var page=encodeURIComponent(window.location.href);__p+='\n<div class="video-push-inner" static="bl=pushBox&o='+(null==(__t=page)?"":__t)+'">\n	<div class="video-push-title">\n		<span class="caption">'+(null==(__t=config.caption)?"":__t)+'</span>\n		<span class="push-close-btn"><a href="javascript:void(0);" static="stp=close"></a></span>\n	</div>\n	<div class="video-push-body">\n		<div class="video-push-wrap">\n			<a href="'+(null==(__t=data.url)?"":__t)+'" class="video-view" target="_blank" static="stp=img&to=play">\n				<img src="'+(null==(__t=data.imgh_url)?"":__t)+'" title="'+(null==(__t=data.title)?"":__t)+'">\n				<span class="s-play"></span>\n				<span class="info-bg"></span>\n				<div class="desc">'+(null==(__t=data.update)?"":__t)+'</div>\n			</a>\n			<h3><a href="'+(null==(__t=data.url)?"":__t)+'" target="_blank" title="'+(null==(__t=data.title)?"":__t)+'" static="stp=title&to=play">'+(null==(__t=data.title)?"":__t)+"</a></h3>\n			<p>"+(null==(__t=data.sub_title)?"":__t)+'</p>\n		</div>\n		<div class="video-push-footer"><a href="'+(null==(__t=config.more_url)?"":__t)+'" static="stp=more" target="_blank" title="'+(null==(__t=config.more_txt)?"":__t)+'">'+(null==(__t=config.more_txt)?"":__t)+">></a></div>\n	</div>\n</div>\n"}return __p}({config:data.config,data:data.data[0]}));self.pushBox.html(html),require("common:static/ui/push/push.js")({el:self.pushBox,cookie:"BDPCPS",cookieid:data.config.cookieid,duration:data.config.duration,time:120,delay:2e3,data:data,afterRender:function(){var t=this;$(".push-close-btn").on("click",function(){t.close()}),t.el.hover(function(){$.log("http://pc.videoclick.baidu.com/v.gif?pid=104&u="+encodeURIComponent(window.location.href)+"&bl=pushBox&ext=hover")},function(){}),$.log("http://pc.videoclick.baidu.com/u.gif?pid=104&u="+encodeURIComponent(window.location.href)+"&bl=pushBox&ext=init")}})}};module.exports=function(t){push.init(t)}});
;define("common:widget/video/searchKeyword/searchKeyword.js",function(require,exports,module){function request(){loading||(loading=!0,videoapi({navcommon:"list:common_search_keyword"},function(e){if(loaded=!0,dataCache=e&&e[0]&&e[0].data&&e[0].data.videos,dataCache.length&&queue.length){var t=tpl({videos:dataCache});queue.each(function(e,a){a.innerHTML=t})}}))}var dataCache,videoapi=require("common:static/ui/videoapi/videoapi.js"),tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+='<ul static="bl=top_search_Keyword">\n';for(var i=0,len=videos.length;len>i;i++){var item=videos[i];__p+='\n	<li>\n		<a static="li='+(null==(__t=i)?"":__t)+'" href="'+(null==(__t=item.url)?"":__t)+'" ',item.update&&(__p+='class="hot"'),__p+=' target="_blank">'+(null==(__t=item.title)?"":__t)+"</a>\n		",item.date&&(__p+='<img src="http://vs4.bdstatic.com/short/icon_hot_tag.gif" alt="" />'),__p+="\n	</li>\n"}__p+="\n</ul>\n"}return __p},queue=$(),loaded=!1,loading=!1;exports=module.exports=function(e){var t=$("#"+e);t&&(loaded?dataCache&&dataCache.length&&t.html(tpl({videos:dataCache})):(queue=queue.add(t),request()))}});
;define("common:widget/video/searchbox/searchbox.js",function(e,i,t){function n(e){$("#"+e.id+"Btn").click(e.openQuickSearch?function(i){i.preventDefault(),i.stopPropagation(),$.log($("#header").hasClass("hdmini")?"http://pc.videoclick.baidu.com/v.gif?pid=104&searchpage="+d+"&s=zdjs&eventtype=click&newheader=1&wd="+encodeURIComponent($("#"+e.id+"Input").val()):"http://pc.videoclick.baidu.com/v.gif?pid=104&searchpage="+d+"&s=zdjs&eventtype=click&wd="+encodeURIComponent($("#"+e.id+"Input").val())),setTimeout(function(){$("#"+e.id).submit()},200)}:function(){$.log($("#header").hasClass("hdmini")?"http://pc.videoclick.baidu.com/v.gif?pid=104&searchpage="+d+"&s=zdjs&eventtype=click&newheader=1&wd="+encodeURIComponent($("#"+e.id+"Input").val()):"http://pc.videoclick.baidu.com/v.gif?pid=104&searchpage="+d+"&s=zdjs&eventtype=click&wd="+encodeURIComponent($("#"+e.id+"Input").val()))})}function a(e){this.pageTn=e.pageTn,this.$input=$("#"+e.id+"Input"),e.ismis?this.bind():a.query?this.fillQuery():(a.instances.push(this),a.request())}var o=e("common:static/ui/videoapi/videoapi.js"),d="";a.prototype={fillQuery:function(){this.$input.attr("data-prekey",a.query).addClass("place-holder").val(a.query),this.bind()},bind:function(){var e=this.$input,i=e.attr("data-prekey");i&&e.focus(function(){e.val()===i&&e.val("").removeClass("place-holder")}).blur(function(){e.val()||e.addClass("place-holder").val(i)})}},a.instances=[],a.request=function(){this.loading||(this.loading=!0,"square"===d?o({index:"list_index_hot_squareTag"},function(e){e&&e[0]&&e[0].data&&e[0].data.videos&&(a.query=e[0].data.videos[0].title),a.query&&$.each(a.instances,function(e,i){i.fillQuery()})}):o({navcommon:"list:common_search_prekeyword"},function(e){if(e&&e[0]&&e[0].data&&e[0].data.videos){var i,t=e[0].data.videos.length;$.each(e[0].data.videos,function(e,n){return d?$.trim(n.s_intro)===d?(a.query=n.title,!1):(n.s_intro&&$.trim(d.split("detail")[0])===n.s_intro&&(i=n.title),void(e===t-1&&(a.query=i))):!1})}a.query&&$.each(a.instances,function(e,i){i.fillQuery()})}))},i=t.exports=function(e){d=e.pageTn;new a(e);n(e)}});
;define("common:widget/video/spadv/spadv.js",function(t,a,i){function e(t){this.keyword=t,this.fnpoll=[]}var n=t("common:static/vendor/jquery/jquery.js");e.prototype={init:function(t,a){this.keyword.wd!==window._query.wd&&(this.fnpoll=[],this.keyword.wd=window._query.wd,this.getdata=this.getdatabak,this.getdata(t,a))},getdata:function(t,a){if(this.init(t,a),this.fnpoll.push([t,a]),!(this.fnpoll.length>1)){var i=this;n.ajax({url:"http://rec.v.baidu.com/rec/queryadv",data:{q:i.keyword.wd},type:"GET",dataType:"JSONP",success:function(t){if(i.getdatabak=i.getdata,t.data.length>0){var a=[];n.each(t.data,function(t,e){e.title===i.keyword.pos&&a.push(e)}),t.data=a}i.getdata=function(a,e){i.init(a,e),t.data.length>0?a(t):e()},n.each(i.fnpoll,function(a,i){t.data.length>0?i[0].apply(null,[t]):i[1].apply(null,[t])})},error:function(){var t=this;t.getdatabak=t.getdata,t.getdata=function(a,i){t.init(a,i),i()}}})}},putpull:function(t,a){var a=a.data[0],i="<a id='psadv_b' target='_blank' href='"+a.link+"' title='"+a.title+"' static=\"bl=qm&stp=dl\" ><img alt='"+a.title+"'  src='"+a.image_link+"' /></a>";n(t).html(i)}},i.exports=new e(window._query)});
;define("common:widget/video/tabsearch/tabsearch.js",function(t,a,e){a=e.exports=function(){var t={news:"https://www.baidu.com/s?rtt=1&bsst=1&cl=2&tn=news&word={{query}}&fr=video",ps:"http://www.baidu.com/s?cl=3&wd={{query}}&ie=utf-8",tieba:"http://tieba.baidu.com/f?kw={{query}}&t=1&ie=utf-8",zhidao:"http://zhidao.baidu.com/q?ct=17&pn=0&tn=ikaslist&rn=10&word={{query}}&ie=utf-8",music:"http://music.baidu.com/search?fr=video&key={{query}}&ie=utf-8",image:"http://image.baidu.com/search/index?tn=baiduimage&ct=201326592&cl=2&lm=-1&pv=&word={{query}}&z=0&ie=utf-8",map:"http://map.baidu.com/m?word={{query}}&fr=map004&ie=utf-8",baike:"http://baike.baidu.com/search/word?word={{query}}&pic=1&sug=1"},a=$("#bdvSearchInput");a.length&&$("#tabsearch .tabs").delegate("a[data-product]","click",function(){var e,i=a.val();i&&i!==a.attr("data-prekey")&&(e=t[this.getAttribute("data-product")],e&&(this.href=e.replace("{{query}}",i)))});var e=$("#tabsearch .tabs a[data-product=ps]");/chrome|firefox|safari|msie 10|rsv:11|msie [89]/i.test(navigator.userAgent)&&(e.prop("href","https://www.baidu.com/"),t.ps="https://www.baidu.com/s?cl=3&wd={{query}}&ie=utf-8",e.one("mouseover",function(){window.BaiduHttps=window.BaiduHttps||{},window.BaiduHttps.callbacks||(window.BaiduHttps.callbacks=function(){}),$.ajax({url:"https://www.baidu.com/con?from=vbaidu&callback=?",dataType:"jsonp",jsonpCallback:"BaiduHttps.callbacks"})}))}});
;define("common:widget/video/userbar/userbar.js",function(require,exports,module){function setRefere(){var e={tvplay:!0,movie:!0,tamasha:!0,cartoon:!0,indsa:!0,cooperate:!0},o=pageTn&&e[pageTn]&&pageTn;if(urlfr)o&&$.cookie.set("bdvref",urlfr+"_"+o,{domain:location.hostname,path:"/"});else if(!$.cookie.get("bdvref")){var n=document.referrer;if(n){var i=document.createElement("a");i.href=n,n=i.hostname.match(/^(v|www)\.(baidu|hao123)\.com$/)?i.hostname:""}n&&o&&"indsa"!==o&&$.cookie.set("bdvref",n+"_"+o,{domain:location.hostname,path:"/"})}}function initUserBar(userinfo){var isBDPlayer=navigator.userAgent.indexOf("BIDUPlayer")>-1;if(isBDPlayer&&window.external&&window.external.bpls_get_login_info)try{var yyUserInfo=eval("("+window.external.bpls_get_login_info()+")");!yyUserInfo.LoginState&&userinfo&&userinfo.value&&(location.href="http://"+userinfo.host+"/passport/index?page=logout&outBd=1&forward="+encodeURIComponent(location.href))}catch(ex){}$(function(){function userInfoInit(){var e=$("#userbar .uname"),o=$("#userbar .logout");e.length&&(e.off("mouseenter.userbar").on("mouseenter.userbar",function(){$(this).addClass("uname-hover")}).off("mouseleave.userbar").on("mouseleave.userbar",function(){$(this).removeClass("uname-hover")}),!location.hostname.match(/\.baidu\.com$/)&&o&&(o.click(function(e){e.preventDefault();var o=document.createElement("iframe");o.src="http://v.baidu.com/dev_proxy_logout.html?frp="+location.hostname,o.style.display="none",document.body.appendChild(o)}),window.video_logout_callback=function(){location.reload()}))}function renderLogin(){var url=encodeURIComponent(document.location.href),tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<ul class="no-login">\n    <li class="login"><a href="http://passport.baidu.com/v2/?login&tpl=vd&u='+(null==(__t=url)?"":__t)+'" target="_blank" id="loginbtn" class="link-login">登录</a><a href="http://v.baidu.com/passport/index?page=combo&pagetype=register&head=1&u='+(null==(__t=url)?"":__t)+'" target="_blank" class="link-reg">注册</a></li>\n    <li class="line">|</li>\n    <li class="link"><a href="http://list.video.baidu.com/iph_promote.html" target="_blank"> APP下载</a></li>\n</ul>';return __p};$("#userbar").append(tpl({url:url})),location.hostname.match(/baidu\.com$/)&&$("#loginbtn").off("click.userbar").on("click.userbar",function(e){e.preventDefault(),bdPassPop.show()})}function renderLogged(userinfo){var tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<ul class="logged">\n    <li class="uname"><a class="link-name" href="'+(null==(__t=userinfo.mysite)?"":__t)+'" target="_blank" id="username"><span id="user_name">'+(null==(__t=userinfo.value)?"":_.escape(__t)),userinfo.user_source&&0!=userinfo.user_source&&1==userinfo.incomplete_user&&0==userinfo.has_uname&&(__p+=' <img src="//passport.bdimg.com/passApi/img/icon_'+(null==(__t=userinfo.user_source)?"":__t)+'_16.png" class="show_icons" id="show_icons" />'),__p+='</span></a>\n    <div class="tip">\n        <ul>\n            <li class="first"><a href="'+(null==(__t=userinfo.mysite)?"":__t)+'" target="_blank" class="my-info">个人中心</a></li>\n            <li><a href="https://'+(null==(__t=userinfo.host)?"":__t)+'/passport/usercenter?&head=1" target="_blank" class="my-info">账号设置</a></li>\n            ',isBDPlayer||(__p+='\n            <li><a href="'+(null==(__t=userinfo.logoutUrl)?"":__t)+'" class="logout">退出</a></li>\n            '),__p+='\n        </ul>\n    </div>\n    </li>\n    <li class="line">|</li>\n    <li class="link"><a href="http://list.video.baidu.com/iph_promote.html" target="_blank"> APP下载</a></li>\n</ul>\n';return __p};0===+userinfo.incomplete_user&&0===+userinfo.has_uname?(userinfo.value=userinfo.emailphone,userinfo.mysite="http://v.baidu.com/i?from=passport"):userinfo.mysite=1===+userinfo.incomplete_user&&0===+userinfo.has_uname?"http://v.baidu.com/i?from=passport":"http://v.baidu.com/i?from=passport",userinfo.logoutUrl="http://"+userinfo.host+"/passport/index?page=logout&outBd=1&forward="+encodeURIComponent(document.location.href),$("#userbar").html(tpl({userinfo:userinfo,isBDPlayer:isBDPlayer})).addClass(userinfo&&userinfo.vipinfo&&userinfo.vipinfo.isvalid?"vip-super":"vip"),userInfoInit()}userinfo&&userinfo.value?renderLogged(userinfo):renderLogin()})}function globalStatistics(e){var o=location.hostname.match(/(?:\.baidu\.com$)|(?:\.hao123\.com$)/)?$.cookie.get("bdvref"):e.cookie&&e.cookie.bdvref,n=$.cookie.get("bdvshare"),i="http://pc.videoclick.baidu.com/v.gif?pid=104&tn="+pageTn+(o?"&VIDEO_FR="+encodeURIComponent(o)+(n?"__"+n:""):""),t=location.href.match(/baidu\.com\/v\?.*word=([^&]*)/);t?i+="&wd="+t[1]:(t=location.href.match(/baidu\.com\/(tv|comic|show)\/(\d*)\.htm/))&&(i+="&id="+t[2]+"&ty="+t[1]),i+=isLogin?"&login=true&uname="+encodeURIComponent(e.value)+"&utype="+utype:"&login=false",urlfr&&(i+="&fr="+urlfr),$.log(i)}var loginCheck=require("common:static/ui/loginCheck/loginCheck.js"),bdPassPop=require("common:static/ui/bdPassPop/bdPassPop.js"),ec=require("common:static/ui/eventcenter/eventcenter.js"),_=require("common:static/vendor/underscore/underscore.js"),isLogin=!1,utype="normal",pageTn="",urlfr=$.url.getQueryValue(location.href,"fr");exports=module.exports=function(e,o){pageTn=e,loginCheck(function(e){e&&e.value&&(isLogin=!0,e.vipinfo&&e.vipinfo.isvalid&&e.vipinfo.isvip&&(utype="vip"),$(document.body).addClass("global-logged")),!o&&initUserBar(e),setRefere(),globalStatistics(e)})},ec.attach("userbar.refresh",function(){exports(pageTn)})});
;define("common:widget/video/userinfo/userinfo.js",function(o,n,e){var a=$,i=o("common:static/ui/bdPassPop/bdPassPop.js"),t=function(o){a(function(){!function(o){if(o&&"object"==typeof o&&o.value&&""!=o.value){window.userinfo={isLogin:!0};var n=['<a href="http://v.baidu.com/i?from=passport" target="_blank" id="username">个人中心</a>'];a("#userinfo p").eq(0).append(a.stringFormat(n.join(""),o))}else{var n=['<a href="//passport.baidu.com/v2/?login&tpl=vd&u=#{Url}" target="_blank" id="loginbtn">登录</a>','<span class="line">|</span>','<a href="http://v.baidu.com/passport/index?page=combo&pagetype=register&head=1&forward=#{Url}">注册</a>'],o={Url:encodeURIComponent(document.location.href)};a("#userinfo p").eq(0).append(a.stringFormat(n.join(""),o)),location.hostname.match(/baidu\.com$/)&&a("#loginbtn").on("click",function(o){o.preventDefault(o),i.show()})}}(o)})};e.exports=t});